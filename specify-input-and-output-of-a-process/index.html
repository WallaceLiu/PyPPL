



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>Input and output of a process - PyPPL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.572ca0f0.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#specify-input-of-a-process" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="PyPPL" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                PyPPL
              </span>
              <span class="md-header-nav__topic">
                Input and output of a process
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="PyPPL" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    PyPPL
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../basic-concepts-and-directory-structure/" title="Basics and folder structure" class="md-nav__link">
      Basics and folder structure
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../placeholders/" title="Templating" class="md-nav__link">
      Templating
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../channels/" title="Channels" class="md-nav__link">
      Channels
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Input and output of a process
      </label>
    
    <a href="./" title="Input and output of a process" class="md-nav__link md-nav__link--active">
      Input and output of a process
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#specify-input-of-a-process" title="Specify input of a process" class="md-nav__link">
    Specify input of a process
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specify-files-as-input" title="Specify files as input" class="md-nav__link">
    Specify files as input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-callback-to-modify-the-input-channel" title="Use callback to modify the input channel" class="md-nav__link">
    Use callback to modify the input channel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specify-output-of-a-process" title="Specify output of a process" class="md-nav__link">
    Specify output of a process
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-of-input-and-output" title="Types of input and output" class="md-nav__link">
    Types of input and output
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../write-your-script/" title="The heart: script" class="md-nav__link">
      The heart: script
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../export-output-files/" title="Output file exporting" class="md-nav__link">
      Output file exporting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../caching/" title="Caching and resuming processes" class="md-nav__link">
      Caching and resuming processes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../runners/" title="Runners and running profiles" class="md-nav__link">
      Runners and running profiles
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../error-handling/" title="Error handling of processes" class="md-nav__link">
      Error handling of processes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../set-other-properties-of-a-process/" title="Other attributes of a process" class="md-nav__link">
      Other attributes of a process
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configure-your-logs/" title="Log configuration" class="md-nav__link">
      Log configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../draw-flowchart-of-a-pipeline/" title="Pipeline flowchart" class="md-nav__link">
      Pipeline flowchart
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configure-a-pipeline/" title="Pipeline configuration" class="md-nav__link">
      Pipeline configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../command-line-argument-parser/" title="Command line argument parser" class="md-nav__link">
      Command line argument parser
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../aggregations/" title="Aggregations" class="md-nav__link">
      Aggregations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../command-line-tool/" title="Command line tool" class="md-nav__link">
      Command line tool
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../change-log/" title="Change log" class="md-nav__link">
      Change log
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#specify-input-of-a-process" title="Specify input of a process" class="md-nav__link">
    Specify input of a process
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specify-files-as-input" title="Specify files as input" class="md-nav__link">
    Specify files as input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-callback-to-modify-the-input-channel" title="Use callback to modify the input channel" class="md-nav__link">
    Use callback to modify the input channel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specify-output-of-a-process" title="Specify output of a process" class="md-nav__link">
    Specify output of a process
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-of-input-and-output" title="Types of input and output" class="md-nav__link">
    Types of input and output
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Input and output of a process</h1>
                
                <h2 id="specify-input-of-a-process">Specify input of a process</h2>
<p>The input of a process of basically a <code>dict</code> with keys as the placeholders and the values as the input channels:</p>
<div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Proc</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ph1&quot;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;ph2&quot;</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]}</span>
<span class="c1"># You can also use combined keys and channels</span>
<span class="c1"># p.input = {&quot;ph1, ph2&quot;: [(1,4), (2,5), (3,6)]}</span>
</pre></div>

<p>The complete form of an input key is <code>&lt;key&gt;:&lt;type&gt;</code>. The <code>&lt;type&gt;</code> could be <code>var</code>, <code>file</code> (a.k.a <code>path</code>, <code>dir</code> or <code>folder</code>) and <code>files</code> (a.k.a <code>paths</code>, <code>dirs</code> or <code>folders</code>). <strong>A type of <code>var</code> can be omitted.</strong> So <code>{"ph1":[1,2,3], "ph2":[4,5,6]}</code> is the same as <code>{"ph1:var":[1,2,3], "ph2:var":[4,5,6]}</code></p>
<p>You can also use a <code>str</code> or a <code>list</code> if a process depends on a prior process, it will automatically use the output channel of the prior process, or you want to use the arguments from command line as input channel (in most case for starting processes, which do not depend on any other processes). For example:</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The number of input keys should be no more than that of the output from the prior process. Otherwise, there is not enough data for the keys.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For output, <code>dict</code> is not supported. As we need the order of the keys and data to be kept when it's being passed on. But you may use <code>OrderedDict</code>.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If you have input keys defined by a string before, for example:
<div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="s2">&quot;ph1, ph2&quot;</span>
</pre></div>
You can then specify the input data/channel directly:
<div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">)]</span>
<span class="c1"># same as:</span>
<span class="n">p1</span><span class="o">.</span><span class="n">input</span>  <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ph1&quot;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;ph2&quot;</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]}</span>
</pre></div>
One thing has to be reminded is that, you can do:
<div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;in&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">}</span>  <span class="c1"># same as p1.input = {&quot;in&quot;: [&quot;a&quot;]}</span>
</pre></div>
But you cannot do:
<div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="s2">&quot;in&quot;</span>
<span class="n">p1</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span> 
<span class="c1"># the right way is p.input = [&quot;a&quot;]</span>
<span class="c1"># because PyPPL will take &quot;a&quot; as the input key instead of data, as it&#39;s a string</span>
</pre></div></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When a job is being prepared, the input files (type: <code>file</code>, <code>path</code>, <code>dir</code> or <code>folder</code>) will be linked to <code>&lt;indir&gt;</code>. In the template, for example, you may use <code>{{i.infile}}</code> to get its path. However, it may have different paths:  </p>
<ul>
<li>The original path</li>
<li>The path from <code>&lt;indir&gt;</code> </li>
<li>The realpath (if the original file specified to the job is a symbolic link, it will be different from the original path)</li>
</ul>
<p>Then you are able to swith the value of <code>{{i.infile}}</code> using the setting <code>p.infile</code>:  </p>
<ul>
<li><code>"indir"</code> (default): The path from <code>&lt;indir&gt;</code></li>
<li><code>"origin"</code>: The original path</li>
<li><code>"real"</code>: The realpath</li>
</ul>
<p>You may also use them directly by:</p>
<ul>
<li><code>{{i.IN_infile}}</code>: The path from <code>&lt;indir&gt;</code></li>
<li><code>{{i.OR_infile}}</code>: The original path</li>
<li><code>{{i.RE_infile}}</code>: The realpath</li>
</ul>
</div>
<p>Use <code>sys.argv</code> (see details for <a href="./channels/#initialize-a-channel"><code>Channel.fromArgv</code></a>):
<div class="highlight"><pre><span></span><span class="n">p3</span> <span class="o">=</span> <span class="n">Proc</span><span class="p">()</span>
<span class="n">p3</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="s2">&quot;in1&quot;</span>
<span class="c1"># same as p3.input = {&quot;in1&quot;: channel.fromArgv ()}</span>
<span class="c1"># Run the program: &gt; python test.py 1 2 3</span>
<span class="c1"># Then in job#0: {{i.in1}} -&gt; 1</span>
<span class="c1"># Then in job#1: {{i.in1}} -&gt; 2</span>
<span class="c1"># Then in job#2: {{i.in1}} -&gt; 3</span>

<span class="n">p4</span> <span class="o">=</span> <span class="n">Proc</span><span class="p">()</span>
<span class="n">p4</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="s2">&quot;in1, in2&quot;</span>
<span class="c1"># same as p4.input = {&quot;in1, in2&quot;: channel.fromArgv ()}</span>
<span class="c1"># Run the program: python test.py 1,a 2,b 3,c</span>
<span class="c1"># Job#0: {{i.in1}} -&gt; 1, {{i.in2}} -&gt; a</span>
<span class="c1"># Job#1: {{i.in1}} -&gt; 2, {{i.in2}} -&gt; b</span>
<span class="c1"># Job#2: {{i.in1}} -&gt; 3, {{i.in2}} -&gt; c</span>
</pre></div></p>
<h3 id="specify-files-as-input">Specify files as input</h3>
<ul>
<li>Use a single file:
  When you specify file as input, you should use <code>file</code> (a.k.a <code>path</code>, <code>dir</code> or <code>folder</code>) flag for the type: 
  <div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;infile:file&quot;</span><span class="p">:</span> <span class="n">channel</span><span class="o">.</span><span class="n">fromPattern</span><span class="p">(</span><span class="s2">&quot;./*.txt&quot;</span><span class="p">)}</span>
</pre></div>
  Then <code>PyPPL</code> will create symbolic links in <code>&lt;workdir&gt;/&lt;job.index&gt;/input/</code>. </li>
</ul>
<blockquote>
<p><strong>Note</strong> The <code>{{i.infile}}</code>
   will return the path of the link in <code>&lt;indir&gt;</code> pointing to the actual input file. If you want to get the path of the actual path, you may use: 
  <div class="highlight"><pre><span></span>{{ i.infile | readlink }} or {{ i._infile }}
</pre></div>
- Use a list of files:
  Similar as a single file, but you have to specify it as <code>files</code>:
  <div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;infiles:files&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">channel</span><span class="o">.</span><span class="n">fromPattern</span><span class="p">(</span><span class="s2">&quot;./*.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()]}</span>
</pre></div>
  Then remember <code>{{i.infiles}}</code> is a list, so is <code>{{i._infiles}}</code>
- Rename input file links
  When there are input files (different files) with the same basename, later ones will be renamed in <code>&lt;indir&gt;</code>. For example:
  <div class="highlight"><pre><span></span><span class="n">pXXX</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;infile1:file&quot;</span><span class="p">:</span> <span class="s2">&quot;/path1/to/theSameBasename.txt&quot;</span><span class="p">,</span> 
  <span class="s2">&quot;infile2:file&quot;</span><span class="p">:</span> <span class="s2">&quot;/path2/to/theSameBasename.txt&quot;</span>
<span class="p">}</span>
</pre></div>
  Remember both files will have symblic links created in <code>&lt;indir&gt;</code>. To avoid <code>infile2</code> being overwritten, the basename of the link will be <code>theSameBasename[1].txt</code>. If you are using built-in template functions to get the filename (<code>{{i.file2 | fn}}</code>), we can still get <code>theSameBasename.txt</code> instead of <code>theSameBasename[1].txt</code>. <code>bn</code>, <code>basename</code>, <code>prefix</code> act similarly.</p>
</blockquote>
<h3 id="use-callback-to-modify-the-input-channel">Use callback to modify the input channel</h3>
<p>You can modify the input channel of a process by a callback. For example:
<div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="n">Proc</span><span class="p">()</span>
<span class="n">p1</span><span class="o">.</span><span class="n">input</span>  <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ph1&quot;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;ph2&quot;</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]}</span>
<span class="n">p1</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;out1:{{ph1}},out2:{{ph2}}&quot;</span>
<span class="n">p1</span><span class="o">.</span><span class="n">script</span> <span class="o">=</span> <span class="s2">&quot;# your logic here&quot;</span>
<span class="c1"># the output channel is [(1,4), (2,5), (3,6)]</span>
<span class="n">p2</span><span class="o">.</span><span class="n">depends</span> <span class="o">=</span> <span class="n">p1</span>
<span class="n">p2</span><span class="o">.</span><span class="n">input</span>   <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;in1, in2&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">ch</span><span class="p">:</span> <span class="n">ch</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)}</span>  
<span class="c1"># just use the last 2 columns: [(2,5), (3,6)]</span>
<span class="c1"># p1.channel keeps intact</span>
</pre></div>
You can check more examples in some channel methods: <a href="./channels/#expand-a-channel-by-directory">channel.expand</a> and <a href="./channels/#collapse-a-channel-by-files-in-a-common-ancestor-directory">channel.collapse</a>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>If you use callback to modify the channel, you may combine the keys: in the above case <code>"in1, in2": ...</code>, or specify them independently: <code>p2.input = {"in1": lambda ch: ch.slice(1,1), "in2": lambda ch: ch.slice(2)}</code>. But remember, <strong>all channels</strong> from <code>p2.depends</code> will be passed to each callback function. For example:
<div class="highlight"><pre><span></span><span class="n">p2</span><span class="o">.</span><span class="n">depends</span> <span class="o">=</span> <span class="p">[</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">]</span>
<span class="n">p2</span><span class="o">.</span><span class="n">input</span>   <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;in1&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">ch0</span><span class="p">,</span> <span class="n">ch1</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span> <span class="s2">&quot;in2&quot;</span><span class="p">:</span> <span class="n">labmda</span> <span class="n">ch0</span><span class="p">,</span> <span class="n">ch1</span><span class="p">:</span> <span class="o">...</span><span class="p">}</span>
<span class="c1"># all channels from p2.depends are passed to each function</span>
</pre></div></p>
</div>
<h2 id="specify-output-of-a-process">Specify output of a process</h2>
<p>Different from input, instead of channels, you have to tell <code>PyPPL</code> how to compute the output channel. The output can be a <code>list</code>, <code>str</code> or <code>OrderedDict</code> (<strong>but not a <code>dict</code>, as the order of keys has to be kept</strong>). If it's <code>str</code>, a comma (<code>,</code>) is used to separate different keys:
<div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">input</span>  <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;invar&quot;</span><span class="p">:[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;infile:file&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/a/b/c.txt&quot;</span><span class="p">]}</span>
<span class="n">p</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;outvar:var:{{i.invar}}2, outfile:file:{{i.infile | bn}}2, outdir:dir:{{i.indir | fn}}-dir&quot;</span>
<span class="c1"># The type &#39;var&#39; is omitted in the first element.</span>
<span class="c1"># The output channel (pXXX.channel) will be:</span>
<span class="c1"># [(&quot;12&quot;, &quot;c.txt2&quot;, &quot;c-dir&quot;)]</span>
</pre></div>
The output keys are automatically attached to the output channel, so you may use them to access the columns. In previous example:
<div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">outvar</span>  <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;12&#39;</span><span class="p">,</span> <span class="p">)]</span>
<span class="n">p</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">outfile</span> <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;&lt;outdir&gt;/c.txt2&#39;</span><span class="p">,</span> <span class="p">)]</span>
<span class="n">p</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">outdir</span>  <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;&lt;outdir&gt;/c-dir&#39;</span><span class="p">,</span> <span class="p">)]</span>
</pre></div></p>
<h2 id="types-of-input-and-output">Types of input and output</h2>
<table>
<thead>
<tr>
<th>Input/Output</th>
<th>Type</th>
<th>Aliases</th>
<th>Behavior</th>
<th>Example-assignment (<code>p.input/output=?</code>)</th>
<th>Example-template-value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Input</td>
<td><code>var</code></td>
<td>-</td>
<td>Use the value directly</td>
<td><code>{"in:var": [1]}</code></td>
<td><code>{{i.in}} -&gt; 1</code></td>
</tr>
<tr>
<td>Input</td>
<td><code>file</code></td>
<td><code>path</code><br /><code>dir</code><br /><code>folder</code></td>
<td>Create link in <code>&lt;indir&gt;</code> and assign the original path to <code>i._in</code></td>
<td><code>{"in:file": ["/path/to/file"]}</code></td>
<td><code>{{i.in}} -&gt; &lt;indir&gt;/file</code><br /><code>{{i._in}} -&gt; /path/to/file</code></td>
</tr>
<tr>
<td>Input</td>
<td><code>files</code></td>
<td><code>paths</code><br /><code>dirs</code><br /><code>folders</code></td>
<td>Same as <code>file</code> but do for multiple files</td>
<td><code>{</code><br /><code>"in:files":</code><br /><code>(["/path/to/file1",</code><br /><code>"/path/to/file2"],)</code><br /><code>}</code></td>
<td><code>{{i.in</code>&#124;<code>asquote}} -&gt; "&lt;indir&gt;/file1" "&lt;indir&gt;/file2"</code><br /><code>{{i._in</code>&#124;<code>asquote}} -&gt; "/path/to/file1" "/path/to/file2"</code></td>
</tr>
<tr>
<td>Output</td>
<td><code>var</code></td>
<td>-</td>
<td>Specify direct value</td>
<td><code>"out:var:{{job.index}}"</code></td>
<td><code>{{o.out}} -&gt; &lt;job.index&gt;</code></td>
</tr>
<tr>
<td>Output</td>
<td><code>file</code></td>
<td><code>path</code></td>
<td>Just specify the basename, output file will be generated in <code>job.outdir</code></td>
<td><code>"out:file:{{i.infile</code>&#124;<code>fn}}.out"</code></td>
<td><code>{{o.out}} == &lt;outdir&gt;/&lt;filename of infile&gt;.out</code></td>
</tr>
<tr>
<td>Output</td>
<td><code>dir</code></td>
<td><code>folder</code></td>
<td>Do the same thing as <code>file</code> but will create the directory</td>
<td><code>"out:dir:{{i.infile</code>&#124;<code>fn}}-outdir"</code></td>
<td><code>{{o.out}} == &lt;outdir&gt;/&lt;filename of infile&gt;-outdir</code> <br />(automatically created)</td>
</tr>
<tr>
<td>Output</td>
<td><code>stdout</code></td>
<td>-</td>
<td>Link <code>job.stdout</code> file to <code>&lt;outdir&gt;</code></td>
<td><code>out:stdout:{{i.infile</code>&#124;<code>fn}}.out</code></td>
<td><code>{{o.out}} == &lt;outdir&gt;/&lt;filename of infile&gt;.out</code></td>
</tr>
<tr>
<td>Output</td>
<td><code>stderr</code></td>
<td>-</td>
<td>Link <code>job.stderr</code> file to <code>&lt;outdir&gt;</code></td>
<td><code>err:stderr:{{i.infile</code>&#124;<code>fn}}.err</code></td>
<td><code>{{o.err}} == &lt;outdir&gt;/&lt;filename of infile&gt;.err</code></td>
</tr>
</tbody>
</table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../channels/" title="Channels" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Channels
              </span>
            </div>
          </a>
        
        
          <a href="../write-your-script/" title="The heart: script" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                The heart: script
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b41f3d20.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>