<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>API - PyPPL</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "API";
    var mkdocs_page_input_path = "api.md";
    var mkdocs_page_url = "/api/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> PyPPL</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../basic-concepts-and-directory-structure/">Basics and folder structure</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../placeholders/">Templating</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../channels/">Channels</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../specify-input-and-output-of-a-process/">Input and output of a process</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../write-your-script/">The heart: script</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../export-output-files/">Output file exporting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../caching/">Caching and resuming processes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../runners/">Runners and running profiles</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../error-handling/">Error handling of processes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../set-other-properties-of-a-process/">Other attributes of a process</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configure-your-logs/">Log configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../draw-flowchart-of-a-pipeline/">Pipeline flowchart</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configure-a-pipeline/">Pipeline configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../command-line-argument-parser/">Command line argument parser</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../aggregations/">Aggregations</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../command-line-tool/">Command line tool</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">API</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#api">API</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#module-pyppl">Module PyPPL</a></li>
        
            <li><a class="toctree-l3" href="#module-proc">Module Proc</a></li>
        
            <li><a class="toctree-l3" href="#module-channel">Module Channel</a></li>
        
            <li><a class="toctree-l3" href="#module-job">Module Job</a></li>
        
            <li><a class="toctree-l3" href="#module-jobmgr">Module Jobmgr</a></li>
        
            <li><a class="toctree-l3" href="#module-aggr">Module Aggr</a></li>
        
            <li><a class="toctree-l3" href="#module-utilsbox">Module utils.box</a></li>
        
            <li><a class="toctree-l3" href="#module-utilscmd">Module utils.cmd</a></li>
        
            <li><a class="toctree-l3" href="#module-utilsparallel">Module utils.parallel</a></li>
        
            <li><a class="toctree-l3" href="#module-utilssafefs">Module utils.safefs</a></li>
        
            <li><a class="toctree-l3" href="#module-proctreeprocnode">Module proctree.ProcNode</a></li>
        
            <li><a class="toctree-l3" href="#module-proctreeproctree">Module proctree.ProcTree</a></li>
        
            <li><a class="toctree-l3" href="#module-templatestemplatepyppl">Module templates.TemplatePyPPL</a></li>
        
            <li><a class="toctree-l3" href="#module-templatestemplatejinja2">Module templates.TemplateJinja2</a></li>
        
            <li><a class="toctree-l3" href="#module-runnersrunner">Module runners.Runner</a></li>
        
            <li><a class="toctree-l3" href="#module-runnersrunnerlocal">Module runners.RunnerLocal</a></li>
        
            <li><a class="toctree-l3" href="#module-runnersrunnerssh">Module runners.RunnerSsh</a></li>
        
            <li><a class="toctree-l3" href="#module-runnersrunnersge">Module runners.RunnerSge</a></li>
        
            <li><a class="toctree-l3" href="#module-runnersrunnerslurm">Module runners.RunnerSlurm</a></li>
        
            <li><a class="toctree-l3" href="#module-runnersrunnerdry">Module runners.RunnerDry</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../change-log/">Change log</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">PyPPL</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>API</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="api">API</h1>
<!-- toc -->

<h2 id="module-pyppl">Module <code>PyPPL</code></h2>
<blockquote>
<p>The PyPPL class</p>
</blockquote>
<pre><code>@static variables:
    `TIPS`: The tips for users
    `RUNNERS`: Registered runners
    `DEFAULT_CFGFILES`: Default configuration file
</code></pre>
<h4 id="__init__-self-config-cfgfile"><code>__init__ (self, config, cfgfile)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>config</code>: the configurations for the pipeline, default: {}<br />
<code>cfgfile</code>:  the configuration file for the pipeline, default: <code>~/.PyPPL.json</code> or <code>./.PyPPL</code>  </li>
</ul>
<h4 id="_any2procs-args-staticmethod"><code>_any2procs (*args) [@staticmethod]</code></h4>
<p>Get procs from anything (aggr.starts, proc, procs, proc names)  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>arg</code>: anything  </p>
</li>
<li>
<p><strong>returns:</strong><br />
A set of procs  </p>
</li>
</ul>
<h4 id="_checkproc-proc-staticmethod"><code>_checkProc (proc) [@staticmethod]</code></h4>
<p>Check processes, whether 2 processes have the same id and tag  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>proc</code>: The process  </p>
</li>
<li>
<p><strong>returns:</strong><br />
If there are 2 processes with the same id and tag, raise <code>ValueError</code>.  </p>
</li>
</ul>
<h4 id="_registerproc-proc-staticmethod"><code>_registerProc (proc) [@staticmethod]</code></h4>
<p>Register the process  </p>
<ul>
<li><strong>params:</strong><br />
<code>proc</code>: The process  </li>
</ul>
<h4 id="_resume-self-args-kwargs"><code>_resume (self, *args, **kwargs)</code></h4>
<p>Mark processes as to be resumed  </p>
<ul>
<li><strong>params:</strong><br />
<code>args</code>: the processes to be marked. The last element is the mark for processes to be skipped.  </li>
</ul>
<h4 id="flowchart-self-fcfile-dotfile"><code>flowchart (self, fcfile, dotfile)</code></h4>
<p>Generate graph in dot language and visualize it.  </p>
<ul>
<li><strong>params:</strong><br />
<code>dotfile</code>: Where to same the dot graph. Default: <code>None</code> (<code>path.splitext(sys.argv[0])[0] + ".pyppl.dot"</code>)<br />
<code>fcfile</code>:  The flowchart file. Default: <code>None</code> (<code>path.splitext(sys.argv[0])[0] + ".pyppl.svg"</code>)  </li>
<li>
<p>For example: run <code>python pipeline.py</code> will save it to <code>pipeline.pyppl.svg</code><br />
<code>dot</code>:     The dot visulizer. Default: "dot -Tsvg {{dotfile}} &gt; {{fcfile}}"  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The pipeline object itself.  </p>
</li>
</ul>
<h4 id="registerrunner-runner-staticmethod"><code>registerRunner (runner) [@staticmethod]</code></h4>
<p>Register a runner  </p>
<ul>
<li><strong>params:</strong><br />
<code>runner</code>: The runner to be registered.  </li>
</ul>
<h4 id="resume-self-args"><code>resume (self, *args)</code></h4>
<p>Mark processes as to be resumed  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>args</code>: the processes to be marked  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The pipeline object itself.  </p>
</li>
</ul>
<h4 id="resume2-self-args"><code>resume2 (self, *args)</code></h4>
<p>Mark processes as to be resumed  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>args</code>: the processes to be marked  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The pipeline object itself.  </p>
</li>
</ul>
<h4 id="run-self-profile"><code>run (self, profile)</code></h4>
<p>Run the pipeline  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>profile</code>: the profile used to run, if not found, it'll be used as runner name. default: 'default'  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The pipeline object itself.  </p>
</li>
</ul>
<h4 id="showallroutes-self"><code>showAllRoutes (self)</code></h4>
<h4 id="start-self-args"><code>start (self, *args)</code></h4>
<p>Set the starting processes of the pipeline  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>args</code>: the starting processes  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The pipeline object itself.  </p>
</li>
</ul>
<h2 id="module-proc">Module <code>Proc</code></h2>
<blockquote>
<p>The Proc class defining a process</p>
</blockquote>
<pre><code>@static variables:
    `RUNNERS`:       The regiested runners
    `ALIAS`:         The alias for the properties
    `LOG_NLINE`:     The limit of lines of logging information of same type of messages

@magic methods:
    `__getattr__(self, name)`: get the value of a property in `self.props`
    `__setattr__(self, name, value)`: set the value of a property in `self.config`
</code></pre>
<h4 id="__init__-self-tag-desc-id-kwargs"><code>__init__ (self, tag, desc, id, **kwargs)</code></h4>
<p>Constructor  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>tag</code>:  The tag of the process<br />
<code>desc</code>: The description of the process<br />
<code>id</code>:   The identify of the process  </p>
</li>
<li>
<p><strong>config:</strong><br />
id, input, output, ppldir, forks, cache, cclean, rc, echo, runner, script, depends, tag, desc, dirsig<br />
exdir, exhow, exow, errhow, errntry, lang, beforeCmd, afterCmd, workdir, args, aggr<br />
callfront, callback, expect, expart, template, tplenvs, resume, nthread  </p>
</li>
<li>
<p><strong>props</strong><br />
input, output, rc, echo, script, depends, beforeCmd, afterCmd, workdir, expect<br />
expart, template, channel, jobs, ncjobids, size, sets, procvars, suffix, logs  </p>
</li>
</ul>
<h4 id="_buildinput-self"><code>_buildInput (self)</code></h4>
<p>Build the input data<br />
Input could be:<br />
1. list: ['input', 'infile:file'] &lt;=&gt; ['input:var', 'infile:path']<br />
2. str : "input, infile:file" &lt;=&gt; input:var, infile:path<br />
3. dict: {"input": channel1, "infile:file": channel2}<br />
or    {"input:var, input:file" : channel3}<br />
for 1,2 channels will be the combined channel from dependents, if there is not dependents, it will be sys.argv[1:]  </p>
<h4 id="_buildjobs-self"><code>_buildJobs (self)</code></h4>
<p>Build the jobs.  </p>
<h4 id="_buildoutput-self"><code>_buildOutput (self)</code></h4>
<p>Build the output data templates waiting to be rendered.  </p>
<h4 id="_buildprocvars-self"><code>_buildProcVars (self)</code></h4>
<p>Build proc attribute values for template rendering,<br />
and also echo some out.  </p>
<h4 id="_buildprops-self"><code>_buildProps (self)</code></h4>
<p>Compute some properties  </p>
<h4 id="_buildscript-self"><code>_buildScript (self)</code></h4>
<p>Build the script template waiting to be rendered.  </p>
<h4 id="_checkcached-self"><code>_checkCached (self)</code></h4>
<p>Tell whether the jobs are cached  </p>
<ul>
<li><strong>returns:</strong><br />
True if all jobs are cached, otherwise False  </li>
</ul>
<h4 id="_readconfig-self-profile-profiles"><code>_readConfig (self, profile, profiles)</code></h4>
<p>Read the configuration  </p>
<ul>
<li><strong>params:</strong><br />
<code>config</code>: The configuration  </li>
</ul>
<h4 id="_runcmd-self-key"><code>_runCmd (self, key)</code></h4>
<p>Run the <code>beforeCmd</code> or <code>afterCmd</code>  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>key</code>: "beforeCmd" or "afterCmd"  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The return code of the command  </p>
</li>
</ul>
<h4 id="_runjobs-self"><code>_runJobs (self)</code></h4>
<p>Submit and run the jobs  </p>
<h4 id="_savesettings-self"><code>_saveSettings (self)</code></h4>
<p>Save all settings in proc.settings, mostly for debug  </p>
<h4 id="_suffix-self"><code>_suffix (self)</code></h4>
<p>Calcuate a uid for the process according to the configuration<br />
The philosophy:<br />
1. procs from different script must have different suffix (sys.argv[0])<br />
2. procs from the same script:<br />
- procs with different id or tag have different suffix<br />
- procs with different input have different suffix (depends, input)  </p>
<ul>
<li><strong>returns:</strong><br />
The uniq id of the process  </li>
</ul>
<h4 id="_tidyafterrun-self"><code>_tidyAfterRun (self)</code></h4>
<p>Do some cleaning after running jobs<br />
self.resume can only be:<br />
- '': normal process<br />
- skip+: skipped process but required workdir and data exists<br />
- resume: resume pipeline from this process, no requirement<br />
- resume+: get data from workdir/proc.settings, and resume  </p>
<h4 id="_tidybeforerun-self"><code>_tidyBeforeRun (self)</code></h4>
<p>Do some preparation before running jobs  </p>
<h4 id="copy-self-tag-desc-id"><code>copy (self, tag, desc, id)</code></h4>
<p>Copy a process  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>id</code>: The new id of the process, default: <code>None</code> (use the varname)<br />
<code>tag</code>:   The tag of the new process, default: <code>None</code> (used the old one)<br />
<code>desc</code>:  The desc of the new process, default: <code>None</code> (used the old one)  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The new process  </p>
</li>
</ul>
<h4 id="log-self-msg-level-key"><code>log (self, msg, level, key)</code></h4>
<p>The log function with aggregation name, process id and tag integrated.  </p>
<ul>
<li><strong>params:</strong><br />
<code>msg</code>:   The message to log<br />
<code>level</code>: The log level<br />
<code>key</code>:   The type of messages  </li>
</ul>
<h4 id="name-self-aggr"><code>name (self, aggr)</code></h4>
<p>Get my name include <code>aggr</code>, <code>id</code>, <code>tag</code>  </p>
<ul>
<li><strong>returns:</strong><br />
the name  </li>
</ul>
<h4 id="run-self-profile-profiles"><code>run (self, profile, profiles)</code></h4>
<p>Run the jobs with a configuration  </p>
<ul>
<li><strong>params:</strong><br />
<code>config</code>: The configuration  </li>
</ul>
<h2 id="module-channel">Module <code>Channel</code></h2>
<blockquote>
<p>The channen class, extended from <code>list</code></p>
</blockquote>
<h4 id="_tuplize-tu-staticmethod"><code>_tuplize (tu) [@staticmethod]</code></h4>
<p>A private method, try to convert an element to tuple<br />
If it's a string, convert it to <code>(tu, )</code><br />
Else if it is iterable, convert it to <code>tuple(tu)</code><br />
Otherwise, convert it to <code>(tu, )</code><br />
Notice that string is also iterable.  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>tu</code>: the element to be converted  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The converted element  </p>
</li>
</ul>
<h4 id="attach-self-names-kwargs"><code>attach (self, *names, **kwargs)</code></h4>
<p>Attach columns to names of Channel, so we can access each column by:<br />
<code>ch.col0</code> == ch.colAt(0)  </p>
<ul>
<li><strong>params:</strong><br />
<code>names</code>: The names. Have to be as length as channel's width. None of them should be Channel's property name<br />
<code>flatten</code>: Whether flatten the channel for the name being attached  </li>
</ul>
<h4 id="cbind-self-cols"><code>cbind (self, *cols)</code></h4>
<p>Add columns to the channel  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>cols</code>: The columns  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The channel with the columns inserted.  </p>
</li>
</ul>
<h4 id="colat-self-index"><code>colAt (self, index)</code></h4>
<p>Fetch one column of a Channel  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>index</code>: which column to fetch  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The Channel with that column  </p>
</li>
</ul>
<h4 id="collapse-self-col"><code>collapse (self, col)</code></h4>
<p>Do the reverse of expand<br />
length: N -&gt; 1<br />
width:  M -&gt; M  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>col</code>:     the index of the column used to collapse  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The collapsed Channel  </p>
</li>
</ul>
<h4 id="copy-self"><code>copy (self)</code></h4>
<p>Copy a Channel using <code>copy.copy</code>  </p>
<ul>
<li><strong>returns:</strong><br />
The copied Channel  </li>
</ul>
<h4 id="create-l-staticmethod"><code>create (l) [@staticmethod]</code></h4>
<p>Create a Channel from a list  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>l</code>: The list, default: []  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The Channel created from the list  </p>
</li>
</ul>
<h4 id="expand-self-col-pattern-t-sortby-reverse"><code>expand (self, col, pattern, t, sortby, reverse)</code></h4>
<p>expand the Channel according to the files in <col>, other cols will keep the same<br />
<code>[(dir1/dir2, 1)].expand (0, "*")</code> will expand to<br />
<code>[(dir1/dir2/file1, 1), (dir1/dir2/file2, 1), ...]</code><br />
length: 1 -&gt; N<br />
width:  M -&gt; M  </p>
<ul>
<li><strong>params:</strong><br />
<code>col</code>:     the index of the column used to expand<br />
<code>pattern</code>: use a pattern to filter the files/dirs, default: <code>*</code><br />
<code>t</code>:       the type of the files/dirs to include  </li>
<li>'dir', 'file', 'link' or 'any' (default)<br />
<code>sortby</code>:  how the list is sorted  </li>
<li>
<p>'name' (default), 'mtime', 'size'<br />
<code>reverse</code>: reverse sort. Default: False  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The expanded Channel  </p>
</li>
</ul>
<h4 id="filter-self-func"><code>filter (self, func)</code></h4>
<p>Alias of python builtin <code>filter</code>  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: the function. Default: None  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The filtered Channel  </p>
</li>
</ul>
<h4 id="filtercol-self-func-col"><code>filterCol (self, func, col)</code></h4>
<p>Just filter on the first column  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: the function<br />
<code>col</code>: the column to filter  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The filtered Channel  </p>
</li>
</ul>
<h4 id="flatten-self-col"><code>flatten (self, col)</code></h4>
<p>Convert a single-column Channel to a list (remove the tuple signs)<br />
<code>[(a,), (b,)]</code> to <code>[a, b]</code>  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>col</code>: The column to flat. None for all columns (default)  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The list converted from the Channel.  </p>
</li>
</ul>
<h4 id="fold-self-n"><code>fold (self, n)</code></h4>
<p>Fold a Channel. Make a row to n-length chunk rows<br />
<div class="highlight"><pre><span></span>a1	a2	a3	a4  
b1	b2	b3	b4  
if n==2, fold(2) will change it to:  
a1	a2  
a3	a4  
b1	b2  
b3	b4  
</pre></div></p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>n</code>: the size of the chunk  </p>
</li>
<li>
<p><strong>returns</strong><br />
The new Channel  </p>
</li>
</ul>
<h4 id="fromargv-staticmethod"><code>fromArgv () [@staticmethod]</code></h4>
<p>Create a Channel from <code>sys.argv[1:]</code><br />
"python test.py a b c" creates a width=1 Channel<br />
"python test.py a,1 b,2 c,3" creates a width=2 Channel  </p>
<ul>
<li><strong>returns:</strong><br />
The Channel created from the command line arguments  </li>
</ul>
<h4 id="fromchannels-args-staticmethod"><code>fromChannels (*args) [@staticmethod]</code></h4>
<p>Create a Channel from Channels  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>args</code>: The Channels  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The Channel merged from other Channels  </p>
</li>
</ul>
<h4 id="fromfile-fn-header-skip-delimit-staticmethod"><code>fromFile (fn, header, skip, delimit) [@staticmethod]</code></h4>
<p>Create Channel from the file content<br />
It's like a matrix file, each row is a row for a Channel.<br />
And each column is a column for a Channel.  </p>
<ul>
<li><strong>params:</strong><br />
<code>fn</code>:      the file<br />
<code>header</code>:  Whether the file contains header. If True, will attach the header  </li>
<li>
<p>So you can use <code>channel.&lt;header&gt;</code> to fetch the column<br />
<code>skip</code>:    first lines to skip<br />
<code>delimit</code>: the delimit for columns  </p>
</li>
<li>
<p><strong>returns:</strong><br />
A Channel created from the file  </p>
</li>
</ul>
<h4 id="frompairs-pattern-staticmethod"><code>fromPairs (pattern) [@staticmethod]</code></h4>
<p>Create a width = 2 Channel from a pattern  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>pattern</code>: the pattern  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The Channel create from every 2 files match the pattern  </p>
</li>
</ul>
<h4 id="fromparams-pnames-staticmethod"><code>fromParams (*pnames) [@staticmethod]</code></h4>
<p>Create a Channel from params  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>*pnames</code>: The names of the option  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The Channel  </p>
</li>
</ul>
<h4 id="frompattern-pattern-t-sortby-reverse-staticmethod"><code>fromPattern (pattern, t, sortby, reverse) [@staticmethod]</code></h4>
<p>Create a Channel from a path pattern  </p>
<ul>
<li><strong>params:</strong><br />
<code>pattern</code>: the pattern with wild cards<br />
<code>t</code>:       the type of the files/dirs to include  </li>
<li>'dir', 'file', 'link' or 'any' (default)<br />
<code>sortby</code>:  how the list is sorted  </li>
<li>
<p>'name' (default), 'mtime', 'size'<br />
<code>reverse</code>: reverse sort. Default: False  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The Channel created from the path  </p>
</li>
</ul>
<h4 id="get-self-idx"><code>get (self, idx)</code></h4>
<p>Get the element of a flattened channel  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>idx</code>: The index of the element to get. Default: 0  </p>
</li>
<li>
<p><strong>return:</strong><br />
The element  </p>
</li>
</ul>
<h4 id="insert-self-cidx-cols"><code>insert (self, cidx, *cols)</code></h4>
<p>Insert columns to a channel  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>cidx</code>: Insert into which index of column?<br />
<code>cols</code>: the columns to be bound to Channel  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The combined Channel<br />
Note, self is also changed  </p>
</li>
</ul>
<h4 id="length-self"><code>length (self)</code></h4>
<p>Get the length of a Channel<br />
It's just an alias of <code>len(chan)</code>  </p>
<ul>
<li><strong>returns:</strong><br />
The length of the Channel  </li>
</ul>
<h4 id="map-self-func"><code>map (self, func)</code></h4>
<p>Alias of python builtin <code>map</code>  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: the function  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The transformed Channel  </p>
</li>
</ul>
<h4 id="mapcol-self-func-col"><code>mapCol (self, func, col)</code></h4>
<p>Map for a column  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: the function<br />
<code>col</code>: the index of the column. Default: 0  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The transformed Channel  </p>
</li>
</ul>
<h4 id="nones-length-width-staticmethod"><code>nones (length, width) [@staticmethod]</code></h4>
<p>Create a channel with <code>None</code>s  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>length</code>: The length of the channel<br />
<code>width</code>:  The width of the channel  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The created channel  </p>
</li>
</ul>
<h4 id="rbind-self-rows"><code>rbind (self, *rows)</code></h4>
<p>The multiple-argument versoin of <code>rbind</code>  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>rows</code>: the rows to be bound to Channel  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The combined Channel<br />
Note, self is also changed  </p>
</li>
</ul>
<h4 id="reduce-self-func"><code>reduce (self, func)</code></h4>
<p>Alias of python builtin <code>reduce</code>  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: the function  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The reduced value  </p>
</li>
</ul>
<h4 id="reducecol-self-func-col"><code>reduceCol (self, func, col)</code></h4>
<p>Reduce a column  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: the function<br />
<code>col</code>: the column to reduce  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The reduced value  </p>
</li>
</ul>
<h4 id="repcol-self-n"><code>repCol (self, n)</code></h4>
<p>Repeat column and return a new channel  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>n</code>: how many times to repeat.  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The new channel with repeated columns  </p>
</li>
</ul>
<h4 id="reprow-self-n"><code>repRow (self, n)</code></h4>
<p>Repeat row and return a new channel  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>n</code>: how many times to repeat.  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The new channel with repeated rows  </p>
</li>
</ul>
<h4 id="rowat-self-index"><code>rowAt (self, index)</code></h4>
<p>Fetch one row of a Channel  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>index</code>: which row to fetch  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The Channel with that row  </p>
</li>
</ul>
<h4 id="slice-self-start-length"><code>slice (self, start, length)</code></h4>
<p>Fetch some columns of a Channel  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>start</code>:  from column to start<br />
<code>length</code>: how many columns to fetch, default: None (from start to the end)  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The Channel with fetched columns  </p>
</li>
</ul>
<h4 id="split-self-flatten"><code>split (self, flatten)</code></h4>
<p>Split a Channel to single-column Channels  </p>
<ul>
<li><strong>returns:</strong><br />
The list of single-column Channels  </li>
</ul>
<h4 id="t-self"><code>t (self)</code></h4>
<p>Transpose a channel  </p>
<h4 id="transpose-self"><code>transpose (self)</code></h4>
<p>Transpose a channel  </p>
<h4 id="unfold-self-n"><code>unfold (self, n)</code></h4>
<p>Do the reverse thing as self.fold does  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>n</code>: How many rows to combind each time. default: 2  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The unfolded Channel  </p>
</li>
</ul>
<h4 id="unique-self"><code>unique (self)</code></h4>
<p>Make the channel unique, remove duplicated rows<br />
Try to keep the order  </p>
<h4 id="width-self"><code>width (self)</code></h4>
<p>Get the width of a Channel  </p>
<ul>
<li><strong>returns:</strong><br />
The width of the Channel  </li>
</ul>
<h2 id="module-job">Module <code>Job</code></h2>
<blockquote>
<p>Job class, defining a job in a process</p>
</blockquote>
<h4 id="__init__-self-index-proc"><code>__init__ (self, index, proc)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>index</code>:   The index of the job in a process<br />
<code>proc</code>:    The process  </li>
</ul>
<h4 id="_indexindicator-self"><code>_indexIndicator (self)</code></h4>
<p>Get the index indicator in the log  </p>
<ul>
<li><strong>returns:</strong><br />
The "[001/100]" like indicator  </li>
</ul>
<h4 id="_linkinfile-self-orgfile"><code>_linkInfile (self, orgfile)</code></h4>
<p>Create links for input files  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>orgfile</code>: The original input file  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The link to the original file.  </p>
</li>
</ul>
<h4 id="_prepinput-self"><code>_prepInput (self)</code></h4>
<p>Prepare input, create link to input files and set other placeholders  </p>
<h4 id="_prepoutput-self"><code>_prepOutput (self)</code></h4>
<p>Build the output data.<br />
Output could be:<br />
1. list: <code>['output:var:{{input}}', 'outfile:file:{{infile.bn}}.txt']</code><br />
or you can ignore the name if you don't put it in script:<br />
<code>['var:{{input}}', 'path:{{infile.bn}}.txt']</code><br />
or even (only var type can be ignored):<br />
<code>['{{input}}', 'file:{{infile.bn}}.txt']</code><br />
2. str : <code>'output:var:{{input}}, outfile:file:{{infile.bn}}.txt'</code><br />
3. OrderedDict: <code>{"output:var:{{input}}": channel1, "outfile:file:{{infile.bn}}.txt": channel2}</code><br />
or    <code>{"output:var:{{input}}, output:file:{{infile.bn}}.txt" : channel3}</code><br />
for 1,2 channels will be the property channel for this proc (i.e. p.channel)  </p>
<h4 id="_prepscript-self"><code>_prepScript (self)</code></h4>
<p>Build the script, interpret the placeholders  </p>
<h4 id="_reportitem-self-key-maxlen-data-loglevel"><code>_reportItem (self, key, maxlen, data, loglevel)</code></h4>
<p>Report the item on logs  </p>
<ul>
<li><strong>params:</strong><br />
<code>key</code>: The key of the item<br />
<code>maxlen</code>: The max length of the key<br />
<code>data</code>: The data of the item<br />
<code>loglevel</code>: The log level  </li>
</ul>
<h4 id="cache-self"><code>cache (self)</code></h4>
<p>Truly cache the job (by signature)  </p>
<h4 id="checkoutfiles-self-expect"><code>checkOutfiles (self, expect)</code></h4>
<p>Check whether output files are generated, if not, add - to rc.  </p>
<h4 id="done-self"><code>done (self)</code></h4>
<p>Do some cleanup when job finished  </p>
<h4 id="export-self"><code>export (self)</code></h4>
<p>Export the output files  </p>
<h4 id="init-self"><code>init (self)</code></h4>
<p>Initiate a job, make directory and prepare input, output and script.  </p>
<h4 id="isexptcached-self"><code>isExptCached (self)</code></h4>
<p>Prepare to use export files as cached information<br />
True if succeed, otherwise False  </p>
<h4 id="istrulycached-self"><code>isTrulyCached (self)</code></h4>
<p>Check whether a job is truly cached (by signature)  </p>
<h4 id="pid-self-val"><code>pid (self, val)</code></h4>
<p>Get/Set the job id (pid or the id from queue system)  </p>
<ul>
<li><strong>params:</strong><br />
<code>val</code>: The id to be set  </li>
</ul>
<h4 id="rc-self-val"><code>rc (self, val)</code></h4>
<p>Get/Set the return code  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>val</code>: The return code to be set. If it is None, return the return code. Default: <code>None</code><br />
If val == -1000: the return code will be negative of current one. 0 will be '-0'  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The return code if <code>val</code> is <code>None</code><br />
If rcfile does not exist or is empty, return 9999, otherwise return -rc<br />
A negative rc (including -0) means output files not generated  </p>
</li>
</ul>
<h4 id="report-self"><code>report (self)</code></h4>
<p>Report the job information to logger  </p>
<h4 id="reset-self-retry"><code>reset (self, retry)</code></h4>
<p>Clear the intermediate files and output files  </p>
<h4 id="showerror-self-totalfailed"><code>showError (self, totalfailed)</code></h4>
<p>Show the error message if the job failed.  </p>
<h4 id="signature-self"><code>signature (self)</code></h4>
<p>Calculate the signature of the job based on the input/output and the script  </p>
<ul>
<li><strong>returns:</strong><br />
The signature of the job  </li>
</ul>
<h4 id="succeed-self"><code>succeed (self)</code></h4>
<p>Tell if the job is successful by return code, and output file expectations.  </p>
<ul>
<li><strong>returns:</strong><br />
True if succeed else False  </li>
</ul>
<h2 id="module-jobmgr">Module <code>Jobmgr</code></h2>
<blockquote>
<p>Job Manager</p>
</blockquote>
<h4 id="__init__-self-proc-runner"><code>__init__ (self, proc, runner)</code></h4>
<p>Job manager constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>proc</code>     : The process<br />
<code>runner</code>   : The runner class  </li>
</ul>
<h4 id="_exit-self"><code>_exit (self)</code></h4>
<h4 id="alljobsdone-self"><code>allJobsDone (self)</code></h4>
<p>Tell whether all jobs are done.<br />
No need to lock as it only runs in one process (the watcher process)  </p>
<ul>
<li><strong>returns:</strong><br />
<code>True</code> if all jobs are done else <code>False</code>  </li>
</ul>
<h4 id="cansubmit-self"><code>canSubmit (self)</code></h4>
<p>Tell whether we can submit jobs.  </p>
<ul>
<li><strong>returns:</strong><br />
<code>True</code> if we can, otherwise <code>False</code>  </li>
</ul>
<h4 id="halt-self-halt_anyway"><code>halt (self, halt_anyway)</code></h4>
<p>Halt the pipeline if needed  </p>
<h4 id="progressbar-self-jid-loglevel"><code>progressbar (self, jid, loglevel)</code></h4>
<h4 id="run-self"><code>run (self)</code></h4>
<p>Start to run the jobs  </p>
<h4 id="runpool-self-rq-sq"><code>runPool (self, rq, sq)</code></h4>
<p>The pool to run jobs (wait jobs to be done)  </p>
<ul>
<li><strong>params:</strong><br />
<code>rq</code>: The run queue<br />
<code>sq</code>: The submit queue  </li>
</ul>
<h4 id="submitpool-self-sq"><code>submitPool (self, sq)</code></h4>
<p>The pool to submit jobs  </p>
<ul>
<li><strong>params:</strong><br />
<code>sq</code>: The submit queue  </li>
</ul>
<h4 id="watchpool-self-rq-sq"><code>watchPool (self, rq, sq)</code></h4>
<p>The watchdog, checking whether all jobs are done.  </p>
<h2 id="module-aggr">Module <code>Aggr</code></h2>
<blockquote>
<p>The aggregation of a set of processes</p>
</blockquote>
<pre><code>@magic methods:
    `__setattr__(self, name, value)`: Set property value of an aggregation.
    - if it's a common property, set it to all processes
    - if it is `input` set it to starting processes
    - if it is `depends` set it to the end processes
    - if it is related to `export` (startswith `ex`), set it to the end processes
    - if it is in ['starts', 'ends', 'id'], set it to the aggregation itself.
    - Otherwise a `ValueError` raised.
    - You can use `[aggr].[proc].[prop]` to set/get the properties of a processes in the aggregation.
</code></pre>
<h4 id="__init__-self-args-kwargs"><code>__init__ (self, *args, **kwargs)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>args</code>: the set of processes<br />
<code>depends</code>: Whether auto deduce depends. Default: True<br />
<code>id</code>: The id of the aggr. Default: None (the variable name)<br />
<code>tag</code>: The tag of the processes. Default: None (a unique 4-char str according to the id)  </li>
</ul>
<h4 id="_select-self-key-forcelist-flatten"><code>_select (self, key, forceList, flatten)</code></h4>
<p>Select processes<br />
<div class="highlight"><pre><span></span># self._procs = OrderedDict([  
#	(&#39;a&#39;, Proc(id = &#39;a&#39;)),  
#	(&#39;b&#39;, Proc(id = &#39;b&#39;)),  
#	(&#39;c&#39;, Proc(id = &#39;c&#39;)),  
#	(&#39;d&#39;, Proc(id = &#39;d&#39;))  
# ])  
  
self[&#39;a&#39;] # proc a  
self[0]   # proc a  
self[1:2] # _Proxy of (proc b, proc c)  
self[1,3] # _Proxy of (proc b, proc d)  
self[&#39;b&#39;, &#39;c&#39;] # _Proxy of (proc b, proc c)  
self[&#39;b,c&#39;] # _Proxy of (proc b, proc c)  
self[Proc(id = &#39;d&#39;)] # proc d  
  
#### `addEnd (self, *procs) `
  
#### `addProc (self, p, tag, where, copy) `
  
Add a process to the aggregation.  
Note that you have to adjust the dependencies after you add processes.  

- **params:**  
`p`:     The process  
`where`: Add to where: &#39;starts&#39;, &#39;ends&#39;, &#39;both&#39; or None (default)  

- **returns:**  
the aggregation itself  
  
#### `addStart (self, *procs) `
  
#### `copy (self, tag, depends, id, delegates, modules) `
  
Like `proc`&#39;s `copy` function, copy an aggregation. Each processes will be copied.  

- **params:**  
`tag`:      The new tag of all copied processes  
`depends`: Whether to copy the dependencies or not. Default: True  
- dependences for processes in starts will not be copied  
`id`:    Use a different id if you don&#39;t want to use the variant name  
`delegates`: Copy delegates? Default: `True`  
`configs`: Copy configs? Default: `True`  

- **returns:**  
The new aggregation  
  
#### `delEnd (self, *procs) `
  
#### `delStart (self, *procs) `
  
#### `delegate (self, attrs, procs) `
  
Delegate the procs to have the attributes set by:  
`aggr.args.a.b = 1`  
Instead of setting `args.a.b` of all processes, `args.a.b` of only delegated processes will be set.  
`procs` can be `starts`/`ends`, but it cannot be set with other procs, which means you can do:  
`aggr.delegate(&#39;args&#39;, &#39;starts&#39;)`, but not `aggr.delegate(&#39;args&#39;, [&#39;starts&#39;, &#39;pXXX&#39;])`  
  
#### `module (self, name, starts, depends, ends, starts_shared, depends_shared, ends_shared) `
  
Define a function for aggr.  
The &quot;shared&quot; parameters will be indicators not to remove those processes  
when the shared function is on.  

- **params:**  
`name`          : The name of the function  
`starts`        : A list of start processes.  
`depends`       : A dict of dependences of the procs  
`ends`          : A list of end processes  
`starts_shared` : A dict of functions that shares the same starts  
`depends_shared`: A dict of functions that shares the same depends  
`ends_shared`   : A dict of functions that shares the same ends  
- For example: `{&lt;procs&gt;: &lt;func&gt;}`  
  
#### `moduleFunc (self, name, on, off) `
  
#### `off (self, *names) `
  
#### `on (self, *names) `
  

## Module `flowchart.Flowchart`  
&gt; Draw flowchart for pipelines

	@static variables:
		`THEMES`: predefined themes
	

#### `__init__ (self, fcfile, dotfile) `
  
The constructor  

- **params:**  
`fcfile`: The flowchart file. Default: `path.splitext(sys.argv[0])[0] + &#39;.pyppl.svg&#39;`  
`dotfile`: The dot file. Default: `path.splitext(sys.argv[0])[0] + &#39;.pyppl.dot&#39;`  
  
#### `_assemble (self) `
  
Assemble the graph for printing and rendering  
  
#### `addLink (self, node1, node2) `
  
Add a link to the chart  

- **params:**  
`node1`: The first node.  
`node2`: The second node.  
  
#### `addNode (self, node, role) `
  
Add a node to the chart  

- **params:**  
`node`: The node  
`role`: Is it a starting node, an ending node or None. Default: None.  
  
#### `generate (self) `
  
Generate the dot file and graph file.  
  
#### `setTheme (self, theme, base) `
  
Set the theme to be used  

- **params:**  
`theme`: The theme, could be the key of Flowchart.THEMES or a dict of a theme definition.  
`base` : The base theme to be based on you pass custom theme  
  

## Module `parameters.Parameter`  
&gt; The class for a single parameter
	

#### `__init__ (self, name, value) `
  
Constructor  

- **params:**  
`name`:  The name of the parameter  
`value`: The initial value of the parameter  
  
#### `_forceType (self) `
  
Coerce the value to the type specified  
TypeError will be raised if error happens  
  
#### `_printName (self, prefix, keylen) `
  
Get the print name with type for the parameter  

- **params:**  
`prefix`: The prefix of the option  
  
#### `setDesc (self, d) `
  
Set the description of the parameter  

- **params:**  
`d`: The description  
  
#### `setName (self, n) `
  
Set the name of the parameter  

- **params:**  
`n`: The name  
  
#### `setRequired (self, r) `
  
Set whether this parameter is required  

- **params:**  
`r`: True if required else False. Default: True  
  
#### `setShow (self, s) `
  
Set whether this parameter should be shown in help information  

- **params:**  
`s`: True if it shows else False. Default: True  
  
#### `setType (self, t) `
  
Set the type of the parameter  

- **params:**  
`t`: The type of the value. Default: str  
- Note: str rather then &#39;str&#39;  
  
#### `setValue (self, v) `
  
Set the value of the parameter  

- **params:**  
`v`: The value  
  

## Module `parameters.Parameters`  
&gt; A set of parameters
	

#### `__init__ (self) `
  
Constructor  
  
#### `_coerceValue (value, t) [@staticmethod]`
  
#### `_getType (self, argname, argtype) `
  
#### `_parseName (self, argname) `
  
If `argname` is the name of an option  

- **params:**  
`argname`: The argname  

- **returns:**  
`an`: clean argument name  
`at`: normalized argument type  
`av`: the argument value, if `argname` is like: `-a=1`  
  
#### `_putValue (self, argname, argtype, argval) `
  
#### `_shouldPrintHelp (self, args) `
  
#### `asDict (self) `
  
Convert the parameters to Box object  

- **returns:**  
The Box object  
  
#### `help (self, error, printNexit) `
  
Calculate the help page  

- **params:**  
`error`: The error message to show before the help information. Default: `&#39;&#39;`  
`printNexit`: Print the help page and exit the program? Default: `False` (return the help information)  

- **return:**  
The help information  
  
#### `loadDict (self, dictVar, show) `
  
Load parameters from a dict  

- **params:**  
`dictVar`: The dict variable.  
- Properties are set by &quot;&lt;param&gt;.required&quot;, &quot;&lt;param&gt;.show&quot;, ...  
`show`:    Whether these parameters should be shown in help information  
- Default: False (don&#39;t show parameter from config object in help page)  
- It&#39;ll be overwritten by the `show` property inside dict variable.  
- If it is None, will inherit the param&#39;s show value  
  
#### `loadFile (self, cfgfile, show) `
  
Load parameters from a json/config file  
If the file name ends with &#39;.json&#39;, `json.load` will be used,  
otherwise, `ConfigParser` will be used.  
For config file other than json, a section name is needed, whatever it is.  

- **params:**  
`cfgfile`: The config file  
`show`:    Whether these parameters should be shown in help information  
- Default: False (don&#39;t show parameter from config file in help page)  
- It&#39;ll be overwritten by the `show` property inside the config file.  
  
#### `parse (self, args) `
  
Parse the arguments from `sys.argv`  
  

## Module `logger`  
&gt; A customized logger for pyppl


#### `class: Box`
</pre></div>
Allow dot operation for OrderedDict
<div class="highlight"><pre><span></span>#### `class: LoggerThemeError`
</pre></div>
Theme errors for logger
<div class="highlight"><pre><span></span>#### `class: PyPPLLogFilter`
</pre></div>
logging filter by levels (flags)
<div class="highlight"><pre><span></span>#### `class: PyPPLLogFormatter`
</pre></div>
logging formatter for pyppl
<div class="highlight"><pre><span></span>#### `class: TemplatePyPPL`
</pre></div>
Built-in template wrapper.
<div class="highlight"><pre><span></span>#### `_formatTheme (theme) [@staticmethod]`
  
Make them in the standard form with bgcolor and fgcolor in raw terminal color strings  
If the theme is read from file, try to translate &quot;COLORS.xxx&quot; to terminal color strings  

- **params:**  
`theme`: The theme  

- **returns:**  
The formatted colors  
  
#### `_getColorFromTheme (level, theme) [@staticmethod]`
  
Get colors from a them  

- **params:**  
`level`: Our own log record level  
`theme`: The theme  

- **returns:**  
The colors  
  
#### `_getLevel (record) [@staticmethod]`
  
Get the flags of a record  

- **params:**  
`record`:  The logging record  
  
#### `getLogger (levels, theme, logfile, lvldiff, name) [@staticmethod]`
  
Get the default logger  

- **params:**  
`levels`: The log levels(tags), default: basic  
`theme`:  The theme of the logs on terminal. Default: True (default theme will be used)  
- False to disable theme  
`logfile`:The log file. Default: None (don&#39;t white to log file)  
`lvldiff`:The diff levels for log  
- [&quot;-depends&quot;, &quot;jobdone&quot;, &quot;+debug&quot;]: show jobdone, hide depends and debug  
`name`:   The name of the logger, default: PyPPL  

- **returns:**  
The logger  
  

## Module `utils`  
&gt; A set of utitities for PyPPL


#### `class: Box`
</pre></div>
Allow dot operation for OrderedDict
<div class="highlight"><pre><span></span>#### `alwaysList (data) `
  
Convert a string or a list with element  

- **params:**  
`data`: the data to be converted  

- **examples:**  
```python  
data = [&quot;a, b, c&quot;, &quot;d&quot;]  
ret  = alwaysList (data)  
# ret == [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]  
</pre></div></p>
<ul>
<li><strong>returns:</strong><br />
The split list  </li>
</ul>
<h4 id="asstr-s-encoding"><code>asStr (s, encoding)</code></h4>
<p>Convert everything (str, unicode, bytes) to str with python2, python3 compatiblity  </p>
<h4 id="brieflist-l"><code>briefList (l)</code></h4>
<p>Briefly show an integer list, combine the continuous numbers.  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>l</code>: The list  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The string to show for the briefed list.  </p>
</li>
</ul>
<h4 id="dictupdate-origdict-newdict"><code>dictUpdate (origDict, newDict)</code></h4>
<p>Update a dictionary recursively.  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>origDict</code>: The original dictionary<br />
<code>newDict</code>:  The new dictionary  </p>
</li>
<li>
<p><strong>examples:</strong><br />
<div class="highlight"><pre><span></span><span class="n">od1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">}}}</span>  
<span class="n">od2</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">:</span><span class="n">value</span> <span class="ow">in</span> <span class="n">od1</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>  
<span class="n">nd</span>  <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}}}</span>  
<span class="n">od1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">nd</span><span class="p">)</span>  
<span class="c1"># od1 == {&quot;a&quot;: {&quot;b&quot;: {&quot;d&quot;: 2}}}, od1[&quot;a&quot;][&quot;b&quot;] is lost  </span>
<span class="n">dictUpdate</span><span class="p">(</span><span class="n">od2</span><span class="p">,</span> <span class="n">nd</span><span class="p">)</span>  
<span class="c1"># od2 == {&quot;a&quot;: {&quot;b&quot;: {&quot;c&quot;: 1, &quot;d&quot;: 2}}}  </span>
</pre></div></p>
</li>
</ul>
<h4 id="filter-func-vec"><code>filter (func, vec)</code></h4>
<p>Python2 and Python3 compatible filter  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: The filter function<br />
<code>vec</code>:  The list to be filtered  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The filtered list  </p>
</li>
</ul>
<h4 id="formatsecs-seconds"><code>formatSecs (seconds)</code></h4>
<p>Format a time duration  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>seconds</code>: the time duration in seconds  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The formated string.<br />
For example: "01:01:01.001" stands for 1 hour 1 min 1 sec and 1 minisec.  </p>
</li>
</ul>
<h4 id="funcsig-func"><code>funcsig (func)</code></h4>
<p>Get the signature of a function<br />
Try to get the source first, if failed, try to get its name, otherwise return None  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: The function  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The signature  </p>
</li>
</ul>
<h4 id="map-func-vec"><code>map (func, vec)</code></h4>
<p>Python2 and Python3 compatible map  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: The map function<br />
<code>vec</code>: The list to be maped  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The maped list  </p>
</li>
</ul>
<h4 id="range-i-args-kwargs"><code>range (i, *args, **kwargs)</code></h4>
<p>Convert a range to list, because in python3, range is not a list  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>r</code>: the range data  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The converted list  </p>
</li>
</ul>
<h4 id="reduce-func-vec"><code>reduce (func, vec)</code></h4>
<p>Python2 and Python3 compatible reduce  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>: The reduce function<br />
<code>vec</code>: The list to be reduced  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The reduced value  </p>
</li>
</ul>
<h4 id="split-s-delimter-trim"><code>split (s, delimter, trim)</code></h4>
<p>Split a string using a single-character delimter  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>s</code>: the string<br />
<code>delimter</code>: the single-character delimter<br />
<code>trim</code>: whether to trim each part. Default: True  </p>
</li>
<li>
<p><strong>examples:</strong><br />
<div class="highlight"><pre><span></span><span class="n">ret</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="s2">&quot;&#39;a,b&#39;,c&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>  
<span class="c1"># ret == [&quot;&#39;a,b&#39;&quot;, &quot;c&quot;]  </span>
<span class="c1"># &#39;,&#39; inside quotes will be recognized.  </span>
</pre></div></p>
</li>
<li>
<p><strong>returns:</strong><br />
The list of substrings  </p>
</li>
</ul>
<h4 id="uid-s-l-alphabet"><code>uid (s, l, alphabet)</code></h4>
<p>Calculate a short uid based on a string.<br />
Safe enough, tested on 1000000 32-char strings, no repeated uid found.<br />
This is used to calcuate a uid for a process  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>s</code>: the base string<br />
<code>l</code>: the length of the uid<br />
<code>alphabet</code>: the charset used to generate the uid  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The uid  </p>
</li>
</ul>
<h4 id="varname-maxline-incldot"><code>varname (maxline, incldot)</code></h4>
<p>Get the variable name for ini  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>maxline</code>: The max number of lines to retrive. Default: 20<br />
<code>incldot</code>: Whether include dot in the variable name. Default: False  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The variable name  </p>
</li>
</ul>
<h2 id="module-utilsbox">Module <code>utils.box</code></h2>
<blockquote>
<p>.</p>
</blockquote>
<h4 id="class-box"><code>class: Box</code></h4>
<div class="highlight"><pre><span></span>Allow dot operation for OrderedDict
</pre></div>

<h2 id="module-utilscmd">Module <code>utils.cmd</code></h2>
<blockquote>
<p>.</p>
</blockquote>
<h4 id="class-cmd"><code>class: Cmd</code></h4>
<div class="highlight"><pre><span></span>A command (subprocess) wapper
</pre></div>

<h4 id="class-timeout"><code>class: Timeout</code></h4>
<div class="highlight"><pre><span></span>
</pre></div>

<h4 id="run-cmd-bg-raiseexc-timeout-kwargs-staticmethod"><code>run (cmd, bg, raiseExc, timeout, **kwargs) [@staticmethod]</code></h4>
<p>A shortcut of <code>Command.run</code><br />
To chain another command, you can do:<br />
<code>run('seq 1 3', bg = True).pipe('grep 1')</code>  </p>
<ul>
<li><strong>params:</strong><br />
<code>cmd</code>     : The command, could be a string or a list<br />
<code>bg</code>      : Run in background or not. Default: <code>False</code>  </li>
<li>
<p>If it is <code>True</code>, <code>rc</code> and <code>stdout/stderr</code> will be default (no value retrieved).<br />
<code>raiseExc</code>: raise the expcetion or not<br />
<code>**kwargs</code>: other arguments for <code>Popen</code>  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The <code>Command</code> instance  </p>
</li>
</ul>
<h4 id="sleep-cmd-bg-raiseexc-timeout-kwargs-kwargs"><code>sleep (cmd, bg, raiseExc, timeout, **kwargs, **kwargs)</code></h4>
<p>sleep(seconds)  </p>
<p>Delay execution for a given number of seconds.  The argument may be<br />
a floating point number for subsecond precision.  </p>
<h4 id="time-cmd-bg-raiseexc-timeout-kwargs-kwargs-kwargs"><code>time (cmd, bg, raiseExc, timeout, **kwargs, **kwargs, **kwargs)</code></h4>
<p>time() -&gt; floating point number  </p>
<p>Return the current time in seconds since the Epoch.<br />
Fractions of a second may be present if the system clock provides them.  </p>
<h2 id="module-utilsparallel">Module <code>utils.parallel</code></h2>
<blockquote>
<p>.</p>
</blockquote>
<h4 id="class-parallel"><code>class: Parallel</code></h4>
<div class="highlight"><pre><span></span>A parallel runner
</pre></div>

<h4 id="run-func-args-nthread-backend-raiseexc-staticmethod"><code>run (func, args, nthread, backend, raiseExc) [@staticmethod]</code></h4>
<p>A shortcut of <code>Parallel.run</code>  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>func</code>    : The function to run<br />
<code>args</code>    : The arguments for the function, should be a <code>list</code> with <code>tuple</code>s<br />
<code>nthread</code> : Number of jobs to run simultaneously. Default: <code>1</code><br />
<code>backend</code> : The backend, either <code>process</code> (default) or <code>thread</code><br />
<code>raiseExc</code>: Whether raise exception or not. Default: <code>True</code>  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The merged results from each job.  </p>
</li>
</ul>
<h2 id="module-utilssafefs">Module <code>utils.safefs</code></h2>
<blockquote>
<p>.</p>
</blockquote>
<h4 id="class-chmoderror"><code>class: ChmodError</code></h4>
<div class="highlight"><pre><span></span>OS system call failed.
</pre></div>

<h4 id="lock-staticmethod"><code>Lock () [@staticmethod]</code></h4>
<p>Returns a non-recursive lock object  </p>
<h4 id="class-safefs"><code>class: SafeFs</code></h4>
<div class="highlight"><pre><span></span>A thread-safe file system
	
	@static variables:
		
		`TMPDIR`: The default temporary directory to store lock files

		# file types
		`FILETYPE_UNKNOWN`  : Unknown file type
		`FILETYPE_NOENT`    : File does not exist
		`FILETYPE_NOENTLINK`: A dead link (a link links to a non-existent file.
		`FILETYPE_FILE`     : A regular file
		`FILETYPE_FILELINK` : A link to a regular file
		`FILETYPE_DIR`      : A regular directory
		`FILETYPE_DIRLINK`  : A link to a regular directory

		# relation of two files
		`FILES_DIFF_BOTHNOENT` : Two files are different and none of them exists
		`FILES_DIFF_NOENT1`    : Two files are different but file1 does not exists
		`FILES_DIFF_NOENT2`    : Two files are different but file2 does not exists
		`FILES_DIFF_BOTHENT`   : Two files are different and both of them exist
		`FILES_SAME_STRNOENT`  : Two files are the same string and it does not exist
		`FILES_SAME_STRENT`    : Two files are the same string and it exists
		`FILES_SAME_BOTHLINKS` : Two files link to one file
		`FILES_SAME_BOTHLINKS1`: File1 links to file2, file2 links to a regular file
		`FILES_SAME_BOTHLINKS2`: File2 links to file1, file1 links to a regular file
		`FILES_SAME_REAL1`     : File2 links to file1, which a regular file
		`FILES_SAME_REAL2`     : File1 links to file2, which a regular file

		`LOCK`: A global lock ensures the locks are locked at the same time
</pre></div>

<h4 id="copy-file1-file2-overwrite-callback-staticmethod"><code>copy (file1, file2, overwrite, callback) [@staticmethod]</code></h4>
<p>A shortcut of <code>SafeFs.copy</code>  </p>
<ul>
<li><strong>params:</strong><br />
<code>file1</code>    : File 1<br />
<code>file2</code>    : File 2<br />
<code>overwrite</code>: Whether overwrite file 2. Default: <code>True</code><br />
<code>callback</code> : The callback. arguments:  </li>
<li><code>r</code> : Whether the file exists  </li>
<li>
<p><code>fs</code>: This instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<code>True</code> if succeed else <code>False</code>  </p>
</li>
</ul>
<h4 id="exists-filepath-callback-staticmethod"><code>exists (filepath, callback) [@staticmethod]</code></h4>
<p>A shortcut of <code>SafeFs.exists</code>  </p>
<ul>
<li><strong>params:</strong><br />
<code>filepath</code>: The filepath<br />
<code>callback</code>: The callback. arguments:  </li>
<li><code>r</code> : Whether the file exists  </li>
<li>
<p><code>fs</code>: This instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<code>True</code> if the file exists else <code>False</code>  </p>
</li>
</ul>
<h4 id="gz-file1-file2-overwrite-callback-staticmethod"><code>gz (file1, file2, overwrite, callback) [@staticmethod]</code></h4>
<p>A shortcut of <code>SafeFs.gz</code>  </p>
<ul>
<li><strong>params:</strong><br />
<code>file1</code>    : File 1<br />
<code>file2</code>    : File 2<br />
<code>overwrite</code>: Whether overwrite file 2. Default: <code>True</code><br />
<code>callback</code> : The callback. arguments:  </li>
<li><code>r</code> : Whether the file exists  </li>
<li>
<p><code>fs</code>: This instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<code>True</code> if succeed else <code>False</code>  </p>
</li>
</ul>
<h4 id="link-file1-file2-overwrite-callback-staticmethod"><code>link (file1, file2, overwrite, callback) [@staticmethod]</code></h4>
<p>A shortcut of <code>SafeFs.link</code>  </p>
<ul>
<li><strong>params:</strong><br />
<code>file1</code>    : File 1<br />
<code>file2</code>    : File 2<br />
<code>overwrite</code>: Whether overwrite file 2. Default: <code>True</code><br />
<code>callback</code> : The callback. arguments:  </li>
<li><code>r</code> : Whether the file exists  </li>
<li>
<p><code>fs</code>: This instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<code>True</code> if succeed else <code>False</code>  </p>
</li>
</ul>
<h4 id="movewithlink-file1-file2-overwrite-callback-staticmethod"><code>moveWithLink (file1, file2, overwrite, callback) [@staticmethod]</code></h4>
<p>A shortcut of <code>SafeFs.moveWithLink</code>  </p>
<ul>
<li><strong>params:</strong><br />
<code>file1</code>    : File 1<br />
<code>file2</code>    : File 2<br />
<code>overwrite</code>: Whether overwrite file 2. Default: <code>True</code><br />
<code>callback</code> : The callback. arguments:  </li>
<li><code>r</code> : Whether the file exists  </li>
<li>
<p><code>fs</code>: This instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<code>True</code> if succeed else <code>False</code>  </p>
</li>
</ul>
<h4 id="osremove-file1-file2-overwrite-callback"><code>osremove (file1, file2, overwrite, callback)</code></h4>
<p>remove(path)  </p>
<p>Remove a file (same as unlink(path)).  </p>
<h4 id="readlink-file1-file2-overwrite-callback"><code>readlink (file1, file2, overwrite, callback)</code></h4>
<p>readlink(path) -&gt; path  </p>
<p>Return a string representing the path to which the symbolic link points.  </p>
<h4 id="shmove-src-dst-staticmethod"><code>shmove (src, dst) [@staticmethod]</code></h4>
<p>Recursively move a file or directory to another location. This is<br />
similar to the Unix "mv" command.  </p>
<p>If the destination is a directory or a symlink to a directory, the source<br />
is moved inside the directory. The destination path must not already<br />
exist.  </p>
<p>If the destination already exists but is not a directory, it may be<br />
overwritten depending on os.rename() semantics.  </p>
<p>If the destination is on our current filesystem, then rename() is used.<br />
Otherwise, src is copied to the destination and then removed.<br />
A lot more could be done here...  A look at a mv.c shows a lot of<br />
the issues this implementation glosses over.  </p>
<h4 id="ungz-file1-file2-overwrite-callback-staticmethod"><code>ungz (file1, file2, overwrite, callback) [@staticmethod]</code></h4>
<p>A shortcut of <code>SafeFs.ungz</code>  </p>
<ul>
<li><strong>params:</strong><br />
<code>file1</code>    : File 1<br />
<code>file2</code>    : File 2<br />
<code>overwrite</code>: Whether overwrite file 2. Default: <code>True</code><br />
<code>callback</code> : The callback. arguments:  </li>
<li><code>r</code> : Whether the file exists  </li>
<li>
<p><code>fs</code>: This instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<code>True</code> if succeed else <code>False</code>  </p>
</li>
</ul>
<h2 id="module-proctreeprocnode">Module <code>proctree.ProcNode</code></h2>
<blockquote>
<p>The node for processes to manage relations between each other</p>
</blockquote>
<h4 id="__init__-self-proc"><code>__init__ (self, proc)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>proc</code>: The <code>Proc</code> instance  </li>
</ul>
<h4 id="sameidtag-self-proc"><code>sameIdTag (self, proc)</code></h4>
<p>Check if the process has the same id and tag with me.  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>proc</code>: The <code>Proc</code> instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<code>True</code> if it is.<br />
<code>False</code> if not.  </p>
</li>
</ul>
<h2 id="module-proctreeproctree">Module <code>proctree.ProcTree</code></h2>
<blockquote>
<p>.</p>
</blockquote>
<h4 id="__init__-self"><code>__init__ (self)</code></h4>
<p>Constructor, set the status of all <code>ProcNode</code>s  </p>
<h4 id="check-proc-staticmethod"><code>check (proc) [@staticmethod]</code></h4>
<p>Check whether a process with the same id and tag exists  </p>
<ul>
<li><strong>params:</strong><br />
<code>proc</code>: The <code>Proc</code> instance  </li>
</ul>
<h4 id="checkpath-self-proc"><code>checkPath (self, proc)</code></h4>
<p>Check whether paths of a process can start from a start process  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>proc</code>: The process  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<code>True</code> if all paths can pass<br />
The failed path otherwise  </p>
</li>
</ul>
<h4 id="getallpaths-self"><code>getAllPaths (self)</code></h4>
<h4 id="getends-self"><code>getEnds (self)</code></h4>
<p>Get the end processes  </p>
<ul>
<li><strong>returns:</strong><br />
The end processes  </li>
</ul>
<h4 id="getnext-proc-staticmethod"><code>getNext (proc) [@staticmethod]</code></h4>
<p>Get next processes of process  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>proc</code>: The <code>Proc</code> instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The processes depend on this process  </p>
</li>
</ul>
<h4 id="getnextstr-proc-staticmethod"><code>getNextStr (proc) [@staticmethod]</code></h4>
<p>Get the names of processes depend on a process  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>proc</code>: The <code>Proc</code> instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The names  </p>
</li>
</ul>
<h4 id="getnexttorun-self"><code>getNextToRun (self)</code></h4>
<p>Get the process to run next  </p>
<ul>
<li><strong>returns:</strong><br />
The process next to run  </li>
</ul>
<h4 id="getpaths-self-proc-proc0"><code>getPaths (self, proc, proc0)</code></h4>
<p>Infer the path to a process  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>proc</code>: The process<br />
<code>proc0</code>: The original process, because this function runs recursively.  </p>
</li>
<li>
<p><strong>returns:</strong><br />
<div class="highlight"><pre><span></span>p1 -&gt; p2 -&gt; p3  
p4  _/  
Paths for p3: [[p4], [p2, p1]]  
</pre></div></p>
</li>
</ul>
<h4 id="getpathstostarts-self-proc"><code>getPathsToStarts (self, proc)</code></h4>
<p>Filter the paths with start processes  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>proc</code>: The process  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The filtered path  </p>
</li>
</ul>
<h4 id="getprevstr-proc-staticmethod"><code>getPrevStr (proc) [@staticmethod]</code></h4>
<p>Get the names of processes a process depends on  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>proc</code>: The <code>Proc</code> instance  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The names  </p>
</li>
</ul>
<h4 id="getstarts-self"><code>getStarts (self)</code></h4>
<p>Get the start processes  </p>
<ul>
<li><strong>returns:</strong><br />
The start processes  </li>
</ul>
<h4 id="register-proc-staticmethod"><code>register (proc) [@staticmethod]</code></h4>
<p>Register the process  </p>
<ul>
<li><strong>params:</strong><br />
<code>proc</code>: The <code>Proc</code> instance  </li>
</ul>
<h4 id="reset-staticmethod"><code>reset () [@staticmethod]</code></h4>
<p>Reset the status of all <code>ProcNode</code>s  </p>
<h4 id="setstarts-self-starts"><code>setStarts (self, starts)</code></h4>
<p>Set the start processes  </p>
<ul>
<li><strong>params:</strong><br />
<code>starts</code>: The start processes  </li>
</ul>
<h4 id="unranprocs-self"><code>unranProcs (self)</code></h4>
<h2 id="module-templatestemplatepyppl">Module <code>templates.TemplatePyPPL</code></h2>
<blockquote>
<p>Built-in template wrapper.</p>
</blockquote>
<h4 id="__init__-self-source-envs"><code>__init__ (self, source, **envs)</code></h4>
<p>Initiate the engine with source and envs  </p>
<ul>
<li><strong>params:</strong><br />
<code>source</code>: The souce text<br />
<code>envs</code>: The env data  </li>
</ul>
<h4 id="_render-self-data"><code>_render (self, data)</code></h4>
<p>Render the template  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>data</code>: The data used for rendering  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The rendered string  </p>
</li>
</ul>
<h2 id="module-templatestemplatejinja2">Module <code>templates.TemplateJinja2</code></h2>
<blockquote>
<p>Jinja2 template wrapper</p>
</blockquote>
<h4 id="__init__-self-source-envs_1"><code>__init__ (self, source, **envs)</code></h4>
<p>Initiate the engine with source and envs  </p>
<ul>
<li><strong>params:</strong><br />
<code>source</code>: The souce text<br />
<code>envs</code>: The env data  </li>
</ul>
<h4 id="_render-self-data_1"><code>_render (self, data)</code></h4>
<p>Render the template  </p>
<ul>
<li>
<p><strong>params:</strong><br />
<code>data</code>: The data used for rendering  </p>
</li>
<li>
<p><strong>returns:</strong><br />
The rendered string  </p>
</li>
</ul>
<h2 id="module-runnersrunner">Module <code>runners.Runner</code></h2>
<blockquote>
<p>The base runner class</p>
</blockquote>
<h4 id="__init__-self-job"><code>__init__ (self, job)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>job</code>:    The job object  </li>
</ul>
<h4 id="_flush-self-fout-ferr-lastout-lasterr-end"><code>_flush (self, fout, ferr, lastout, lasterr, end)</code></h4>
<p>Flush stdout/stderr  </p>
<ul>
<li><strong>params:</strong><br />
<code>fout</code>: The stdout file handler<br />
<code>ferr</code>: The stderr file handler<br />
<code>lastout</code>: The leftovers of previously readlines of stdout<br />
<code>lasterr</code>: The leftovers of previously readlines of stderr<br />
<code>end</code>: Whether this is the last time to flush  </li>
</ul>
<h4 id="finish-self"><code>finish (self)</code></h4>
<h4 id="getpid-self"><code>getpid (self)</code></h4>
<p>Get the job id  </p>
<h4 id="isrunning-self"><code>isRunning (self)</code></h4>
<p>Try to tell whether the job is still running.  </p>
<ul>
<li><strong>returns:</strong><br />
<code>True</code> if yes, otherwise <code>False</code>  </li>
</ul>
<h4 id="kill-self"><code>kill (self)</code></h4>
<p>Try to kill the running jobs if I am exiting  </p>
<h4 id="retry-self"><code>retry (self)</code></h4>
<h4 id="run-self_1"><code>run (self)</code></h4>
<ul>
<li><strong>returns:</strong><br />
True: success/fail<br />
False: needs retry  </li>
</ul>
<h4 id="submit-self"><code>submit (self)</code></h4>
<p>Try to submit the job  </p>
<h2 id="module-runnersrunnerlocal">Module <code>runners.RunnerLocal</code></h2>
<blockquote>
<p>Constructor
    @params:
        <code>job</code>:    The job object
        <code>config</code>: The properties of the process</p>
</blockquote>
<h4 id="__init__-self-job_1"><code>__init__ (self, job)</code></h4>
<h2 id="module-runnersrunnerssh">Module <code>runners.RunnerSsh</code></h2>
<blockquote>
<p>The ssh runner</p>
</blockquote>
<pre><code>@static variables:
    `SERVERID`: The incremental number used to calculate which server should be used.
    - Don't touch unless you know what's going on!
</code></pre>
<h4 id="__init__-self-job_2"><code>__init__ (self, job)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>job</code>:    The job object  </li>
</ul>
<h4 id="isserveralive-server-key-staticmethod"><code>isServerAlive (server, key) [@staticmethod]</code></h4>
<h2 id="module-runnersrunnersge">Module <code>runners.RunnerSge</code></h2>
<blockquote>
<p>The sge runner</p>
</blockquote>
<h4 id="__init__-self-job_3"><code>__init__ (self, job)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>job</code>:    The job object<br />
<code>config</code>: The properties of the process  </li>
</ul>
<h2 id="module-runnersrunnerslurm">Module <code>runners.RunnerSlurm</code></h2>
<blockquote>
<p>The slurm runner</p>
</blockquote>
<h4 id="__init__-self-job_4"><code>__init__ (self, job)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>job</code>:    The job object<br />
<code>config</code>: The properties of the process  </li>
</ul>
<h2 id="module-runnersrunnerdry">Module <code>runners.RunnerDry</code></h2>
<blockquote>
<p>The dry runner</p>
</blockquote>
<h4 id="__init__-self-job_5"><code>__init__ (self, job)</code></h4>
<p>Constructor  </p>
<ul>
<li><strong>params:</strong><br />
<code>job</code>:    The job object  </li>
</ul>
<h4 id="finish-self_1"><code>finish (self)</code></h4>
<p>Do some cleanup work when jobs finish  </p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../faq/" class="btn btn-neutral float-right" title="FAQ">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../command-line-tool/" class="btn btn-neutral" title="Command line tool"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../command-line-tool/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../faq/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
