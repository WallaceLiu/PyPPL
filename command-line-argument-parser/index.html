



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>Command line argument parser - PyPPL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.572ca0f0.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#add-an-option" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="PyPPL" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                PyPPL
              </span>
              <span class="md-header-nav__topic">
                Command line argument parser
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="PyPPL" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    PyPPL
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../basic-concepts-and-directory-structure/" title="Basics and folder structure" class="md-nav__link">
      Basics and folder structure
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../placeholders/" title="Templating" class="md-nav__link">
      Templating
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../channels/" title="Channels" class="md-nav__link">
      Channels
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../specify-input-and-output-of-a-process/" title="Input and output of a process" class="md-nav__link">
      Input and output of a process
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../write-your-script/" title="The heart: script" class="md-nav__link">
      The heart: script
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../export-output-files/" title="Output file exporting" class="md-nav__link">
      Output file exporting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../caching/" title="Caching and resuming processes" class="md-nav__link">
      Caching and resuming processes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../runners/" title="Runners and running profiles" class="md-nav__link">
      Runners and running profiles
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../error-handling/" title="Error handling of processes" class="md-nav__link">
      Error handling of processes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../set-other-properties-of-a-process/" title="Other attributes of a process" class="md-nav__link">
      Other attributes of a process
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configure-your-logs/" title="Log configuration" class="md-nav__link">
      Log configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../draw-flowchart-of-a-pipeline/" title="Pipeline flowchart" class="md-nav__link">
      Pipeline flowchart
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configure-a-pipeline/" title="Pipeline configuration" class="md-nav__link">
      Pipeline configuration
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Command line argument parser
      </label>
    
    <a href="./" title="Command line argument parser" class="md-nav__link md-nav__link--active">
      Command line argument parser
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-an-option" title="Add an option" class="md-nav__link">
    Add an option
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-attributes-of-an-option" title="Set attributes of an option" class="md-nav__link">
    Set attributes of an option
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-type" title="About type" class="md-nav__link">
    About type
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declear-the-type-of-an-option" title="Declear the type of an option" class="md-nav__link">
    Declear the type of an option
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infer-type-when-option-initialized" title="Infer type when option initialized" class="md-nav__link">
    Infer type when option initialized
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allowed-types" title="Allowed types" class="md-nav__link">
    Allowed types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overwrite-the-type-from-command-line" title="Overwrite the type from command line" class="md-nav__link">
    Overwrite the type from command line
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback" title="Callback" class="md-nav__link">
    Callback
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-params-from-a-dict" title="Load params from a dict" class="md-nav__link">
    Load params from a dict
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-params-from-a-configuration-file" title="Load params from a configuration file" class="md-nav__link">
    Load params from a configuration file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preseved-option-names" title="Preseved option names" class="md-nav__link">
    Preseved option names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-other-attributes-of-params" title="Set other attributes of params" class="md-nav__link">
    Set other attributes of params
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#show-the-usagesexampledescription-of-the-program" title="Show the usages/example/description of the program" class="md-nav__link">
    Show the usages/example/description of the program
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-the-prefix-of-option-names" title="Set the prefix of option names" class="md-nav__link">
    Set the prefix of option names
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-the-default-help-options" title="Set the default help options" class="md-nav__link">
    Set the default help options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#positional-options" title="Positional options" class="md-nav__link">
    Positional options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-of-subcommands" title="Support of subcommands" class="md-nav__link">
    Support of subcommands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-a-subcommand" title="Add a subcommand" class="md-nav__link">
    Add a subcommand
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alias-of-a-command" title="Alias of a command:" class="md-nav__link">
    Alias of a command:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-help-command" title="Use a different 'help' command" class="md-nav__link">
    Use a different 'help' command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-theme-for-help-page" title="Use a different theme for help page" class="md-nav__link">
    Use a different theme for help page
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-you-own-theme" title="Use you own theme:" class="md-nav__link">
    Use you own theme:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../aggregations/" title="Aggregations" class="md-nav__link">
      Aggregations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../command-line-tool/" title="Command line tool" class="md-nav__link">
      Command line tool
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../change-log/" title="Change log" class="md-nav__link">
      Change log
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-an-option" title="Add an option" class="md-nav__link">
    Add an option
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-attributes-of-an-option" title="Set attributes of an option" class="md-nav__link">
    Set attributes of an option
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-type" title="About type" class="md-nav__link">
    About type
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declear-the-type-of-an-option" title="Declear the type of an option" class="md-nav__link">
    Declear the type of an option
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infer-type-when-option-initialized" title="Infer type when option initialized" class="md-nav__link">
    Infer type when option initialized
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allowed-types" title="Allowed types" class="md-nav__link">
    Allowed types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overwrite-the-type-from-command-line" title="Overwrite the type from command line" class="md-nav__link">
    Overwrite the type from command line
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback" title="Callback" class="md-nav__link">
    Callback
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-params-from-a-dict" title="Load params from a dict" class="md-nav__link">
    Load params from a dict
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-params-from-a-configuration-file" title="Load params from a configuration file" class="md-nav__link">
    Load params from a configuration file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preseved-option-names" title="Preseved option names" class="md-nav__link">
    Preseved option names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-other-attributes-of-params" title="Set other attributes of params" class="md-nav__link">
    Set other attributes of params
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#show-the-usagesexampledescription-of-the-program" title="Show the usages/example/description of the program" class="md-nav__link">
    Show the usages/example/description of the program
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-the-prefix-of-option-names" title="Set the prefix of option names" class="md-nav__link">
    Set the prefix of option names
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-the-default-help-options" title="Set the default help options" class="md-nav__link">
    Set the default help options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#positional-options" title="Positional options" class="md-nav__link">
    Positional options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-of-subcommands" title="Support of subcommands" class="md-nav__link">
    Support of subcommands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-a-subcommand" title="Add a subcommand" class="md-nav__link">
    Add a subcommand
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alias-of-a-command" title="Alias of a command:" class="md-nav__link">
    Alias of a command:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-help-command" title="Use a different 'help' command" class="md-nav__link">
    Use a different 'help' command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-different-theme-for-help-page" title="Use a different theme for help page" class="md-nav__link">
    Use a different theme for help page
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-you-own-theme" title="Use you own theme:" class="md-nav__link">
    Use you own theme:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Command line argument parser</h1>
                
                <!-- toc -->

<p>This module is just for your convenience. You are free to use Python's built-in <code>argparse</code> module or just use <code>sys.argv</code>.</p>
<p>To start with, just import it from <code>PyPPL</code>:
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyppl</span> <span class="kn">import</span> <span class="n">params</span>
</pre></div></p>
<h2 id="add-an-option">Add an option</h2>
<p><div class="highlight"><pre><span></span><span class="n">params</span><span class="o">.</span><span class="n">opt</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
<span class="c1"># or</span>
<span class="c1"># params.opt.setValue(&#39;a&#39;)</span>
<span class="n">params</span><span class="o">.</span><span class="n">opt2</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setRequired</span><span class="p">()</span>

<span class="c1"># then don&#39;t forget to parse the command line arguments:</span>
<span class="n">params</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
</pre></div>
Then <code>python pipeline.py -opt b -opt2 1 2 3</code> will overwrite the value.<br />
<code>list</code> option can also be specified as <code>-opt2 1 -opt2 2 -opt2 3</code>
To use the value:
<div class="highlight"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">opt</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span>
<span class="c1"># var is &#39;b2&#39;</span>
<span class="n">var2</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">opt2</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="c1"># var2 is [1, 2, 3, 4]</span>
</pre></div></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can also reset a list argument, by speicifying nothing to its key:
<div class="highlight"><pre><span></span># Let&#39;s say you specified defaults for a list argument:
params.opt2 = [1,2,3]
# just
# python pipeline.py -opt2 4
# will give you: [1,2,3,4]
# If you only want [4] instead, you could do:
# python pipeline.py -opt2 -opt2 4
#                    ^^^^^ resets the list
</pre></div></p>
</div>
<p>If you feel annoying using <code>params.xxx.value</code> to have the value of the option, you can convert the <code>params</code> object to a <code>Box</code> object (inherited from <code>OrderedDict</code>):
<div class="highlight"><pre><span></span><span class="n">params</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
<span class="n">ps</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">asDict</span><span class="p">()</span>
<span class="c1"># or just</span>
<span class="c1"># ps = params.parse()</span>
</pre></div>
Then you can use <code>params.xxx</code> to get the value directly:
<div class="highlight"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">opt</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span>
<span class="n">var2</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">opt2</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div></p>
<h2 id="set-attributes-of-an-option">Set attributes of an option</h2>
<p>An option has server properties:
- <code>desc</code>: The description of the option, shows in the help page. Default: <code>[]</code>
- <code>required</code>: Whether the option is required. Default: <code>False</code>
- <code>show</code>: Whether this option should be shown in the help page. Default: <code>True</code>
- <code>type</code>: The type of the option value. Default: <code>str</code>
- <code>name</code>: The name of the option, then in command line, <code>-&lt;name&gt;</code> refers to the option.
- <code>value</code>: The default value of the option.
- <code>callback</code>: The callback to check or transform the value</p>
<p>You can either set the value of an option by 
<div class="highlight"><pre><span></span><span class="n">params</span><span class="o">.</span><span class="n">opt</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
or
<div class="highlight"><pre><span></span><span class="n">params</span><span class="o">.</span><span class="n">opt</span><span class="o">.</span><span class="n">setRequired</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="c1"># params.opt.setDesc(&#39;Desctipion&#39;)</span>
<span class="c1"># params.opt.setShow(False)</span>
<span class="c1"># params.opt.setType(list)</span>
<span class="c1"># params.opt.setName(&#39;opt1&#39;)</span>
<span class="c1"># params.opt.setValue([1,2,3])</span>
<span class="c1"># or they can be chained:</span>
<span class="c1"># params.opt.setDesc(&#39;Desctipion&#39;) \</span>
<span class="c1">#           .setShow(False)        \</span>
<span class="c1">#           .setType(list)         \</span>
<span class="c1">#           .setName(&#39;opt1&#39;)       \</span>
<span class="c1">#           .setValue([1,2,3])</span>
</pre></div></p>
<h3 id="about-type">About <code>type</code></h3>
<h4 id="declear-the-type-of-an-option">Declear the type of an option</h4>
<p>You can use either the type itself or the type name:<br />
<code>params.opt.type = int</code> or <code>params.opt.type = 'int'</code></p>
<h4 id="infer-type-when-option-initialized">Infer type when option initialized</h4>
<p>When you initialize an option:
<div class="highlight"><pre><span></span><span class="c1"># with nothing specified</span>
<span class="n">params</span><span class="o">.</span><span class="n">opt</span>
<span class="c1"># with a default value</span>
<span class="n">params</span><span class="o">.</span><span class="n">opt</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
The type will be inferred from the value. In the first case, the type is <code>None</code>, will in the second, it's <code>'int'</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Let it initialize an option first: <code>params.opt</code>, then when the value is set explictly:<br />
<code>params.opt.value = "a"</code><br />
Or when the value replaced (set value after initialization):<br />
<code>params.opt = "a"</code><br />
The type will not be changed (it's <code>None</code> in this case).</p>
</div>
<h4 id="allowed-types">Allowed types</h4>
<p>Literally, allowed types are <code>str</code>, <code>int</code>, <code>float</code>, <code>bool</code> and <code>list</code>. But we allow subtypes (types of elements) for <code>list</code>. By default, the value of <code>list</code> elements will be recognized automatically. For example, <code>'1'</code> will be recognized as an integer <code>1</code>, and <code>"True"</code> will be recognized as bool value <code>True</code>. You can avoid this by specified the subtypes explictly: <code>params.opt.type = 'list:str'</code>, then <code>'1'</code> will be kept as <code>'1'</code> rather than <code>1</code>, and <code>"True"</code> will be <code>"True"</code> instead of <code>True</code>.</p>
<p>You can use shortcuts for the types:
<div class="highlight"><pre><span></span>i     -&gt; &#39;int&#39;
f     -&gt; &#39;float&#39;
b     -&gt; &#39;bool&#39;
s     -&gt; &#39;str&#39;
l     -&gt; &#39;list&#39;
array -&gt; &#39;list&#39;
</pre></div>
For subtypes, you can also do <code>params.opt.type = 'l:s'</code> indicating <code>list:str</code>. Or you can even mix them: <code>params.opt.type = 'l:str'</code> or <code>params.opt.type = 'list:s'</code></p>
<h4 id="overwrite-the-type-from-command-line">Overwrite the type from command line</h4>
<p>Even though we may declear the type of an option by <code>params.opt.type = 'list:str'</code>, the users are able to overwrite it by pass the type through command argument:<br />
<code>&gt; program -opt:list:int 1 2 3</code><br />
Then we will get: <code>params.opt.value == [1,2,3]</code> instead of <code>params.opt.value == ['1', '2', '3']</code> when we do:<br />
<code>&gt; program -opt 1 2 3</code><br />
Flexibly, we can have mixed types of elements in a list option:<br />
<code>&gt; program -opt:list:bool 1 -opt:list:int 2 -opt:list:str 3</code><br />
We will get: <code>params.opt.value == [True, 2, '3']</code></p>
<h3 id="callback">Callback</h3>
<p>You may use a callback function to check the value of an option:
<div class="highlight"><pre><span></span><span class="n">params</span><span class="o">.</span><span class="n">infile</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">str</span>
<span class="n">params</span><span class="o">.</span><span class="n">infile</span><span class="o">.</span><span class="n">callback</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">opt</span><span class="p">:</span> <span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">opt</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;&quot;infile&quot; does not exist.&#39;</span>
<span class="c1"># python pipeline.py -infile __no_such_file__</span>
<span class="c1"># gives error: &quot;infile&quot; does not exist.</span>
</pre></div></p>
<p>Or transform the value. Let's we want to get the full path of a file by passing its dirname and filename:
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>
<span class="n">params</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">str</span>
<span class="n">params</span><span class="o">.</span><span class="n">fn</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">str</span>
<span class="n">params</span><span class="o">.</span><span class="n">fn</span><span class="o">.</span><span class="n">callback</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">opt</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">opt</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># python pipeline.py -dir path/to/dir -fn a.txt</span>
<span class="c1"># params.fn.value then will be &quot;path/to/dir/a.txt&quot; instead of &quot;a.txt&quot;</span>
</pre></div></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>About the returns of the callback:<br />
If it returns <code>True</code>, <code>None</code> or an instance of <code>Parameter</code>, then no errors assumed. Otherwise, a string or a list of errors should be returned.</p>
</div>
<h2 id="load-params-from-a-dict">Load params from a dict</h2>
<p>You can define a <code>dict</code>, and then load it to <code>params</code>:
<div class="highlight"><pre><span></span><span class="n">d2load</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;p1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;p1.required&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s1">&#39;p2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
    <span class="s1">&#39;p2.show&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s1">&#39;p3&#39;</span><span class="p">:</span> <span class="mf">2.3</span><span class="p">,</span>
    <span class="s1">&#39;p3.desc&#39;</span><span class="p">:</span> <span class="s1">&#39;The p3 params&#39;</span><span class="p">,</span>
    <span class="s1">&#39;p3.required&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s1">&#39;p3.show&#39;</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">}</span>
<span class="n">params</span><span class="o">.</span><span class="n">loadDict</span> <span class="p">(</span><span class="n">d2load</span><span class="p">)</span>
<span class="c1"># params.p1.value    == 1</span>
<span class="c1"># params.p1.required == True</span>
<span class="c1"># params.p1.show     == False</span>
<span class="c1"># params.p1.type     == int</span>
<span class="c1"># params.p2.value    == [1,2,3]</span>
<span class="c1"># params.p2.required == False</span>
<span class="c1"># params.p2.show     == True</span>
<span class="c1"># params.p2.type     == list</span>
<span class="c1"># params.p3.value    == 2.3</span>
<span class="c1"># params.p3.required == True</span>
<span class="c1"># params.p3.show     == False</span>
<span class="c1"># params.p3.type     == float</span>
</pre></div>
Note that by default, the options from the <code>dict</code> will be hidden from the help page. If you want to show some of them, just set <code>p2.show = True</code>, or you want to show them all: <code>params.loadDict(d2load, show = True)</code></p>
<h2 id="load-params-from-a-configuration-file">Load params from a configuration file</h2>
<p>If the configuration file has a name ending with '.json', then <code>json.load</code> will be used to load the file into a <code>dict</code>, and <code>params.loadDict</code> will be used to load it to <code>params</code></p>
<p>Else python's <code>ConfigParse</code> will be used. All params in the configuration file should be under one section with whatever name:
<div class="highlight"><pre><span></span><span class="k">[Config]</span>
<span class="na">p1: 1</span>
<span class="na">p1.required: True</span>
<span class="na">p2: [1,2,3]</span>
<span class="na">p2.show: True</span>
<span class="na">p3: 2.3</span>
<span class="na">p3.desc</span> <span class="o">=</span> <span class="s">&#39;The p3 params&#39;</span>
<span class="na">p3.required: True</span>
<span class="na">p3.show: True</span>
</pre></div></p>
<p>Similarly, you can set the default value for <code>show</code> property by: <code>params.loadCfgfile("params.config", show=True)</code></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p><code>params</code> is a singleton of <code>Parameters</code>. It's a combination of configuration and command line arguments. So you are able to load the configurations from files, which will be used as default values, before you parse the command line arguments. You are also able to choose some of the options for the users to pass value to, and some hidden from the users.</p>
</div>
<h2 id="preseved-option-names">Preseved option names</h2>
<p>We have a certain convention of the option names used with <code>params</code>:
- Make sure it's only composed of alphabetics, underscores and hyphens.
- Make sure it starts with alphabetics.
- Make sure it's not one of these words (<code>help</code>, <code>parse</code>, <code>loadDict</code>, <code>loadFile</code> and <code>asDict</code>)</p>
<h2 id="set-other-attributes-of-params">Set other attributes of params</h2>
<h3 id="show-the-usagesexampledescription-of-the-program">Show the usages/example/description of the program</h3>
<p><code>params._setUsage(["{prog} -h", "{prog} -infile &lt;infile&gt; [options]"])</code><br />
<code>params._setDesc(["This program does this.", "This program also does that."])</code><br />
<code>params._setHbald(True) # print help if no arguments passed</code>
Or<br />
<code>params._usage = ["{prog} -h", "{prog} -infile &lt;infile&gt; [options]"]</code><br />
<code>params._desc  = ["This program does this.", "This program also does that."]</code><br />
<code>params._hbald = True</code><br />
Notice the leading underscore of the attribute name, this makes sure <code>usage</code>, <code>desc</code> and <code>hbald</code> still avaiable to be used as option names.</p>
<h3 id="set-the-prefix-of-option-names">Set the prefix of option names</h3>
<p>By default, the option names are recognized from the command line if they follow the convention and start with <code>-</code>. You may change it, let's say you want the option names to start with <code>--</code>:<br />
<code>params('prefix', '--')</code><br />
The only <code>prog --opt 1</code> will be parsed, instead of <code>prog -opt 1</code> to get the value by <code>params.opt.value</code>  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot use an empty prefix. </p>
</div>
<h3 id="set-the-default-help-options">Set the default help options</h3>
<p>By default, the help options are <code>['-h', '--help', '-H', '-?']</code>.<br />
<code>params._hopts = '-h, --help, -H, -?'</code> or<br />
<code>params.setHopts(['-h', '--help', '-H', '-?'])</code>  </p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>These statements can also be chained:<br />
<code>params._setUsage(["{prog} -h", "{prog} -infile &lt;infile&gt; [options]"]) \
       ._setPrefix('--') \
       ._setHopts(['-H', '-?'])</code></p>
</div>
<h2 id="positional-options">Positional options</h2>
<p>Positional options are activated when you set the descriptions of them:
<div class="highlight"><pre><span></span><span class="n">params</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="s1">&#39;The positional option&#39;</span>
</pre></div>
If you want to use a different variable to represent positional option:
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyppl</span> <span class="kn">import</span> <span class="n">Parameters</span>
<span class="n">Parameters</span><span class="o">.</span><span class="n">POSITIONAL</span> <span class="o">=</span> <span class="s1">&#39;POSITIONAL&#39;</span>

<span class="n">params</span><span class="o">.</span><span class="n">POSITIONAL</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="s1">&#39;The positional option&#39;</span>
</pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default type of positional option is <code>list</code>. The values can be appeared in the middle of the command line: <code>prog -a 1 pos1 -b 2 pos2</code>, then <code>params._ == ['pos1', 'pos2']</code></p>
</div>
<h2 id="support-of-subcommands">Support of subcommands</h2>
<h3 id="add-a-subcommand">Add a subcommand</h3>
<p><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyppl</span> <span class="kn">import</span> <span class="n">commands</span>
<span class="n">commands</span><span class="o">.</span><span class="n">list</span> <span class="o">=</span> <span class="s1">&#39;list work directories under &lt;wdir&gt;&#39;</span>
</pre></div>
<code>commands.list</code> becomes an instance of <code>Parameters</code>, you may do anything like what we did for <code>params</code>. For example, add an option for the command:
<div class="highlight"><pre><span></span><span class="n">commands</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">wdir</span>      <span class="o">=</span> <span class="s1">&#39;./workdir&#39;</span>
<span class="n">commands</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">wdir</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="s1">&#39;The &lt;ppldir&gt; containing process work directories.&#39;</span>
</pre></div>
To parse the arguments:
<div class="highlight"><pre><span></span><span class="n">command</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="n">commands</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
<span class="c1"># command: The command</span>
<span class="c1"># params : The parsed arguments, a Box object</span>
<span class="c1">#          To get the value of an option: params.wdir</span>
<span class="c1"># if you want to get the Parameter objects:</span>
<span class="c1"># params.wdir == commands[command].wdir.value</span>
</pre></div></p>
<h3 id="alias-of-a-command">Alias of a command:</h3>
<p>You can simply add an alias for an option by:
<div class="highlight"><pre><span></span><span class="n">commands</span><span class="o">.</span><span class="n">list</span> <span class="o">=</span> <span class="s1">&#39;list work directories under &lt;wdir&gt;&#39;</span>
<span class="n">commands</span><span class="o">.</span><span class="n">show</span> <span class="o">=</span> <span class="n">commands</span><span class="o">.</span><span class="n">list</span>
<span class="c1"># the help page gives:</span>
<span class="c1"># COMMANDS:</span>
<span class="c1">#   list | show                           - list work directories under &lt;wdir&gt;                        </span>
<span class="c1">#   help &lt;COMMAND&gt;                        - Print help information for the command   </span>
</pre></div></p>
<h3 id="use-a-different-help-command">Use a different 'help' command</h3>
<p>By default, you may use <code>prog help &lt;command&gt;</code> to print the help information for the command. Alternatively, you can change it by: 
<div class="highlight"><pre><span></span><span class="n">commands</span><span class="o">.</span><span class="n">_hcmd</span> <span class="o">=</span> <span class="s1">&#39;h&#39;</span>
<span class="c1"># prog h &lt;command&gt;</span>
</pre></div></p>
<h3 id="use-a-different-theme-for-help-page">Use a different theme for help page</h3>
<p>There are three built-in themes: <code>default</code>, <code>blue</code> and <code>plain</code>, to switch them:
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyppl</span> <span class="kn">import</span> <span class="n">Commands</span>
<span class="n">commands</span> <span class="o">=</span> <span class="n">Commands</span><span class="p">(</span><span class="n">theme</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="c1"># if you don&#39;t like the colors, just use the plain theme</span>
</pre></div>
You may also use different theme for <code>params</code>:
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyppl</span> <span class="kn">import</span> <span class="n">Parameters</span>
<span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">theme</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
</pre></div></p>
<h3 id="use-you-own-theme">Use you own theme:</h3>
<p>Instead of passing a theme name to <code>Commands/Parameters</code>, you may also pass the entire theme:
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">colorama</span> <span class="kn">import</span> <span class="n">Fore</span><span class="p">,</span> <span class="n">Back</span><span class="p">,</span> <span class="n">Style</span>
<span class="c1"># or from colorama import Fore, Back, Style</span>

<span class="n">commands</span> <span class="o">=</span> <span class="n">Commands</span><span class="p">(</span><span class="n">theme</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># the color for errors</span>
    <span class="n">error</span>   <span class="o">=</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span><span class="p">,</span>     
    <span class="c1"># the color for warnings</span>
    <span class="n">warning</span> <span class="o">=</span> <span class="n">Fore</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">,</span>  
    <span class="c1"># the color for the title of each section</span>
    <span class="n">title</span>   <span class="o">=</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">CYAN</span><span class="p">,</span> 
    <span class="c1"># the color for the programe name in any sections</span>
    <span class="n">prog</span>    <span class="o">=</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
    <span class="c1"># the color for default values</span>
    <span class="n">default</span> <span class="o">=</span> <span class="n">Fore</span><span class="o">.</span><span class="n">MAGENTA</span><span class="p">,</span>
    <span class="c1"># the color for option names</span>
    <span class="n">optname</span> <span class="o">=</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span>
    <span class="c1"># the color for option types or placeholders</span>
    <span class="n">opttype</span> <span class="o">=</span> <span class="n">Fore</span><span class="o">.</span><span class="n">BLUE</span><span class="p">,</span>
    <span class="c1"># the color for option descriptions</span>
    <span class="n">optdesc</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># leave it as default</span>
<span class="p">})</span>
</pre></div></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../configure-a-pipeline/" title="Pipeline configuration" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Pipeline configuration
              </span>
            </div>
          </a>
        
        
          <a href="../aggregations/" title="Aggregations" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Aggregations
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b3a2063f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>